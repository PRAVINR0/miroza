Miroza - Explanation of files and code
=====================================

Overview
--------
This file explains the static site scaffold, the generator scripts and the frontend assets. It walks through the important files and explains the purpose of the code and the meaning of key lines or blocks.

Contents
- index.html: homepage (entrypoint for GitHub Pages)
- page-*.html: paginated archive pages
- articles/article-*.html: per-article pages (generated content)
- assets/styles.css: site styling, responsive layout, theme variables and animations
- assets/script.js: client-side behavior (search, theme toggle, lazy images)
- scripts/generate_articles.ps1: PowerShell generator that created the 1000 articles
- scripts/generate_articles.py: an alternative Python generator (kept for reference)
- sitemap.xml: XML sitemap of the site
- robots.txt: robots rules
- README.md: quick run & deploy notes

----------------------------------------------------------------------

index.html (root)
------------------
Purpose
- This is the main entrypoint that GitHub Pages serves. It lists the latest posts, includes meta tags for SEO, links to `assets/styles.css` and `assets/script.js`, and provides search and theme toggle behaviors via the JS asset.

Important parts (high-level explanation)
- <!doctype html> and <html lang="en">: standard HTML document declaration and language hint for accessibility and SEO.
- <meta charset="utf-8"> and <meta name="viewport">: ensure correct text rendering and make the layout responsive on mobile.
- <title> and <meta name="description">: used by search engines and when the page is shared.
- <link rel="stylesheet" href="assets/styles.css">: includes primary CSS.
- article blocks (<article class="post">...): each post block includes a title link, meta date/category, and a short excerpt. The CSS uses `.posts-list` and `.post` to make a responsive grid.
- <script src="assets/script.js"></script>: attaches search, theme toggle and image lazy-loading.

How it ties to other files
- Each article links to `articles/article-N.html`.
- Pagination links reference `page-2.html` etc., generated by the generator.

----------------------------------------------------------------------

page-2.html and page-*.html
---------------------------
Purpose
- Archive / paginated pages. Same structure as `index.html` but with a different slice of the articles.

Key lines
- Title and description reflect the page number.
- The `.posts-list` contains a number of `<article class="post">` items.
- Navigation uses `.pagination` with `.prev` and `.next` links.

----------------------------------------------------------------------

articles/article-*.html
-----------------------
Purpose
- Individual article pages. Each contains:
  - SEO meta (title, description, canonical link)
  - Header linking back to `/`
  - An article body with `h1` (title), `.article-meta`, a feature image (`img.feature`) and paragraphs.

Key patterns
- Link to stylesheet with an absolute path `/assets/styles.css` so pages work from any path level.
- Feature images use external placeholder URLs `https://picsum.photos/seed/article-N/1200/628` so images load from the web and are not committed to the repo.

----------------------------------------------------------------------

assets/styles.css
------------------
Purpose
- Central styling for layout, palette, responsive grid, animations and theming.

Top-level variables
- :root{--bg:..., --card:..., --accent:..., --text:..., --max:...}
  - These define colors and sizing defaults used across the site. Altering these changes the look globally.
- html[data-theme='dark'] and html[data-theme='light']
  - These let JavaScript apply an explicit theme override without requiring the OS-level media query.

Background and animation
- body uses a `--bg-gradient` variable and animation `bgShift` to create a slow animated gradient background.
  - `background-size:200% 200%` and `animation:bgShift 14s linear infinite` move the gradient smoothly.

Layout and cards
- .wrap limits page width using `max-width: var(--max)` and centers content.
- .posts-list uses CSS Grid and switches between 1, 2 or 3 columns via media queries (responsive).
- .post uses a softly rounded card with shadow; on hover it translates up and increases shadow for a lift effect.

Images and reveal
- Thumbnails and feature images are set to start with opacity:0 and a small vertical translate and transition to opacity:1 and transform:none when the `visible` class is added by JS (IntersectionObserver). This makes images fade/slide in as the user scrolls.

Theme toggle
- .theme-toggle is a floating circular button; its look is defined to match the theme and it animates on click.

Small notes about editing styles
- To change colors, edit the CSS variables under `:root` and the `html[data-theme=...]` blocks.
- To change the gradient timing, adjust `animation:bgShift` duration or `@keyframes bgShift` values.

----------------------------------------------------------------------

assets/script.js
-----------------
Purpose
- Small, dependency-free JavaScript that provides:
  - Search/filtering on index pages
  - Theme toggle (light/dark) persisted in `localStorage`
  - Lazy-loading and reveal animation for images using `IntersectionObserver`

Key sections (explanation)
- Immediately-invoked function expression (IIFE) wraps the code to avoid polluting global scope.
- Search
  - Selects `#search` input and `.posts-list .post` nodes. On `input` it filters posts by checking `p.innerText.toLowerCase().indexOf(q) !== -1`.
  - This is a simple client-side filter (no stemming or indexing) and works well for small/medium lists.
- Theme toggle
  - `createThemeToggle()` creates a `<button>` with class `theme-toggle` and appends it to `document.body`.
  - Button click toggles `document.documentElement.setAttribute('data-theme','dark'|'light')` and writes the choice to `localStorage` under `theme`.
  - On load we read `localStorage.theme`; if present we set the explicit theme. If not present, we try to use `window.matchMedia('(prefers-color-scheme: dark)')` to respect system preference.
  - The button updates its emoji/icon to `ðŸŒ™` or `â˜€ï¸` based on the current theme.
- Lazy images & reveal
  - On `DOMContentLoaded` the script marks images as lazy (sets `loading='lazy'`) and uses an IntersectionObserver to add the `visible` class when the image scrolls into view.
  - CSS transitions on `.visible` (and on `img` default rules) produce a smooth fade/slide in.

Accessibility notes
- The theme toggle is an ordinary button which is keyboard focusable. For improved accessibility we could add `aria-pressed` or `aria-label` attributes. This is recommended for production.

----------------------------------------------------------------------

scripts/generate_articles.ps1 (PowerShell generator)
--------------------------------------------------
Purpose
- Generates N article HTML files into `articles/`, paginated `index.html`/`page-*.html` and `sitemap.xml`. The generator uses placeholder images from `picsum.photos` so no image files need to be committed.

How it works (step-by-step)
- Parameters: `param([int]$count=1000,[string]$baseUrl='https://example.com')` â€” lets you set how many articles to create and the published base URL used for canonical links and the sitemap.
- It creates `articles/` if missing: `New-Item -ItemType Directory -Path $artDir`.
- `Repeat-String` helper builds dummy body text.
- Article template is stored in a here-string and filled using the `-f` operator: `$articleTemplate -f $title, $excerpt, $url, $date, $topic, $image, $body, (Get-Date).Year`.
- For each article it writes `articles/article-N.html` using `Set-Content -Encoding UTF8`.
- Pagination: calculates `$pages = [math]::Ceiling($count / $perPage)` and slices items for each page to generate `index.html` (page 1) and `page-X.html` files for X>1.
- Sitemap: writes an XML file with a `<url>` entry for the root, each paginated index, and every article URL.

Why we used PowerShell
- Your environment (Windows) had PowerShell available even when Python/Node were not; this allowed the generator to run directly from the terminal without extra installs.

Important notes about committing generated files
- Committing thousands of HTML files increases repository size and can slow down git operations.
- Alternatives: keep only the generator in the repo and run it in CI to publish results to `gh-pages` branch (recommended for larger generated sites).

----------------------------------------------------------------------

scripts/generate_articles.py (Python generator)
----------------------------------------------
Purpose
- A cross-platform Python script with similar behavior to the PowerShell script. It is included for reference and for users who prefer running Python locally.

Key differences from the PowerShell version
- Uses Python string templates and JSON-like data structures (lists/dicts) to collect metadata and render pages.
- If you run the script locally you must have Python 3 installed.

----------------------------------------------------------------------

sitemap.xml
-----------
Purpose
- Lists canonical URLs for the site in XML format for search engines. The generator writes this file automatically.

Important: replace `https://example.com` with your real site URL (for GitHub Pages it is https://<username>.github.io/<repo> or your custom domain).

----------------------------------------------------------------------

robots.txt
----------
Purpose
- A minimal robots.txt that allows all user-agents and references the sitemap location.

----------------------------------------------------------------------

README.md
---------
Contains quick instructions to preview locally and how to run the generator.

----------------------------------------------------------------------

Development tips and next steps
------------------------------
- To tweak colors: edit `assets/styles.css` variables under `:root` and in the `html[data-theme='...']` blocks.
- To change article content templates: edit the article template string inside `scripts/generate_articles.ps1` or `scripts/generate_articles.py`.
- To avoid committing generated files: remove `articles/` and `.html` pages from the repo and add a GitHub Action to run the generator and deploy the `gh-pages` branch.
- Accessibility: add `aria` attributes to the theme toggle and ensure color contrast is acceptable for both themes.

If you'd like, I can also produce a per-line annotated version of a specific file (for example `assets/styles.css`) where I show each line and a short comment explaining it. Tell me which file you want fully annotated or say `all` to request per-line comments for every important file (note: `all` will be long but I will split it into multiple files if needed).

----------------------------------------------------------------------

End of explanation. If you want the annotated per-line file(s), reply with which file(s) to annotate next.

