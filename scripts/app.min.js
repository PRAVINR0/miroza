(function(){"use strict";const ge="miroza_theme",ue="https://miroza.online";function he(){try{const l=localStorage.getItem(ge);return l==="dark"||l==="light"?l:null}catch(l){return null}}(function(){const u=he();if(u&&document.documentElement.dataset.theme!==u){document.documentElement.dataset.theme=u;return}!u&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(document.documentElement.dataset.theme="dark")})();const pe={world:"World",science:"Science",health:"Health",space:"Space",economy:"Economy",technology:"Technology",weather:"Weather",business:"Business",finance:"Finance",education:"Education",climate:"Climate",travel:"Travel",culture:"Culture",analysis:"Analysis",ideas:"Ideas",lifestyle:"Lifestyle",automobiles:"Automobiles",career:"Career",energy:"Energy",security:"Security"},de={news:"/news.html","india-news":"/news.html",india:"/news.html",blog:"/blog.html",article:"/articles.html",articles:"/articles.html",story:"/articles.html",posts:"/articles.html"};Object.entries(pe).forEach(([l,u])=>{de[l]||(de[l]=`/articles.html?topic=${encodeURIComponent(u)}`)});function ce(l){return(l||"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function fe(l){const u=ce(l);return de[u]||null}function we(){var u;if(!((u=window.MIROZA)!=null&&u.utils))return;const l=new Set(["/news/index.html","news/index.html"]);window.MIROZA.utils.qsa("a[href]").forEach(i=>{const t=i.getAttribute("href")||"";if(l.has(t)){i.setAttribute("href","/news.html"),i.dataset.prefetch=i.dataset.prefetch||"";return}}),window.MIROZA.utils.qsa('a[href^="/category/"]').forEach(i=>{const t=i.getAttribute("href")||"",f=ce(t.replace("/category/","").replace(/\.html?$/,"")),I=fe(f);I&&(i.setAttribute("href",I),i.dataset.prefetch=i.dataset.prefetch||"")})}document.documentElement.classList.add("js-ready"),window.MIROZA=window.MIROZA||{},window.MIROZA.utils={qs:(l,u=document)=>u.querySelector(l),qsa:(l,u=document)=>Array.from(u.querySelectorAll(l)),shuffle(l){for(let u=l.length-1;u>0;u--){const i=Math.floor(Math.random()*(u+1));[l[u],l[i]]=[l[i],l[u]]}return l},safeHTML(l){if(window.DOMPurify)return DOMPurify.sanitize(l,{USE_PROFILES:{html:!0}});const u=document.createElement("div");return u.textContent=l,u.innerHTML},prefersReducedMotion(){return window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches},formatNumber(l){try{return Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:1}).format(l||0)}catch(u){return l||0}},isInternalLink(l){try{return new URL(l,window.location.origin).origin===window.location.origin}catch(u){return!1}}},window.MIROZA.feedTools=(function(){const l={filesRead:new Set,htmlFallbacks:[],parsedPages:[]},u="/sitemap.xml",i=25,t="(max-width: 600px) 100vw, (max-width: 1200px) 50vw, 400px";function f(r){r&&l.filesRead.add(r)}function I(r){return fetch(r).then(A=>{if(!A.ok)throw new Error(`${r} responded with ${A.status}`);return A.json()}).then(A=>{const v=Array.isArray(A)?A:[];if(f(r),!v.length)throw new Error(`${r} returned no entries`);return v.forEach(o=>{o&&typeof o=="object"&&!o.__source&&(o.__source="json")}),v})}function h(r,A=i){return l.htmlFallbacks.push(r),fetch(u).then(v=>{if(!v.ok)throw new Error("Missing sitemap");return f(u),v.text()}).then(v=>g(v,r,A)).catch(v=>(console.warn("MIROZA: Unable to scan fallback HTML for",r,v),[]))}function g(r,A,v){try{const o=new DOMParser().parseFromString(r,"application/xml"),d=Array.from(o.querySelectorAll("url > loc")).map(p=>p.textContent.trim()).filter(Boolean),c=A==="news"?"/news/":A==="blogs"?"/blogs/":"/articles/",M=d.filter(p=>p.includes(c)).slice(0,v);return Promise.all(M.map(p=>w(p,A))).then(p=>p.filter(Boolean))}catch(o){return console.warn("MIROZA: Unable to parse sitemap XML",o),[]}}function w(r,A){return fetch(r).then(v=>{if(!v.ok)throw new Error(`Status ${v.status}`);return v.text()}).then(v=>{l.parsedPages.push(r);const o=n(v,r,A);return y(o,A)}).catch(v=>(console.warn("MIROZA: Unable to parse fallback page",r,v),null))}function n(r,A,v){var o,d,c;try{const M=new DOMParser().parseFromString(r,"text/html"),p=j=>{var W,K;return((K=(W=M.querySelector(j))==null?void 0:W.getAttribute("content"))==null?void 0:K.trim())||""},L=p('meta[property="og:title"]')||p('meta[name="title"]')||((d=(o=M.querySelector("title"))==null?void 0:o.textContent)==null?void 0:d.trim())||"Untitled",z=p('meta[property="og:description"]')||p('meta[name="description"]')||"",m=p('meta[name="author"]')||p('meta[property="article:author"]'),C=p('meta[property="article:published_time"]')||p('meta[name="date"]')||p('meta[itemprop="datePublished"]'),Z=p('meta[property="article:section"]')||p('meta[name="category"]'),D=p('meta[property="og:image"]')||p('meta[name="image"]'),$=((c=M.querySelector('link[rel="canonical"]'))==null?void 0:c.getAttribute("href"))||A;return{title:L,description:z,author:m,date:C,category:Z,image:D,link:$,type:v}}catch(M){return console.warn("MIROZA: Fallback meta parse failed for",A,M),null}}function y(r,A){if(!r)return null;const v=T(r.link),o=_(v),d=r.category||S(A),c=r.date&&!Number.isNaN(Date.parse(r.date))?new Date(r.date).toISOString():new Date().toISOString(),M=r.image?{src:r.image,srcset:`${r.image} 800w`,sizes:t,alt:r.title}:null;return{id:o||v,slug:o,title:r.title,excerpt:r.description,author:r.author||"MIROZA Desk",category:d,date:c,image:M,link:v,contentType:A==="blogs"?"blog":A==="news"?"news":"article",__source:"html"}}function T(r){if(!r)return"#";try{const A=new URL(r,window.location.origin);return A.pathname+A.search}catch(A){return r}}function _(r){if(!r)return"";try{const A=new URL(r,window.location.origin);return ce(A.pathname.split("/").filter(Boolean).pop())}catch(A){return ce(r.split("/").filter(Boolean).pop())}}function S(r){return r==="news"?"India":r==="blogs"||r==="blog"?"Blog":"World"}function b(){return{filesRead:Array.from(l.filesRead),htmlFallbacks:l.htmlFallbacks.slice(),parsedPages:l.parsedPages.slice()}}return{fetchJsonArray:I,scanType:h,parseHtmlMeta:n,getAudit:b}})(),window.MIROZA.shell=(function(){const l=[{label:"Home",href:"/",match:["/"]},{label:"News",href:"/news.html",startsWith:["/news"]},{label:"Articles",href:"/articles.html",startsWith:["/articles"]},{label:"Blogs",href:"/blog.html",startsWith:["/blog","/blogs"]},{label:"About",href:"/#about",hash:"#about",homeOnly:!0},{label:"Contact",href:"/#contact",hash:"#contact",homeOnly:!0}];function u(){i()}function i(){const g=window.MIROZA.utils.qs(".main-nav");if(!g)return;let w=g.querySelector("ul");w||(w=document.createElement("ul"),g.appendChild(w)),w.innerHTML="",l.forEach(n=>{const y=document.createElement("li"),T=document.createElement("a");T.href=n.href,T.textContent=n.label,T.setAttribute("data-prefetch",""),t(n)&&T.setAttribute("aria-current","page"),y.appendChild(T),w.appendChild(y)}),g.dataset.shellReady="true"}function t(g){const w=h(window.location.pathname);return g.startsWith&&f(w,g.startsWith)||g.match&&I(w,g.match)?!0:g.hash?g.homeOnly?w==="/"&&window.location.hash===g.hash:window.location.hash===g.hash:g.href==="/"&&w==="/"&&!window.location.hash}function f(g,w){return(Array.isArray(w)?w:[w]).some(y=>g.startsWith(y))}function I(g,w){return(Array.isArray(w)?w:[w]).includes(g)}function h(g){if(!g)return"/";const w=g.replace(/\\/g,"/").replace(/\/index\.html$/i,"/");return w===""?"/":w}return{init:u,enhanceNav:i}})(),window.MIROZA.components=(function(){const l=[{title:"MIROZA",body:["Modern news & articles hub focused on trustworthy analysis and zero-noise delivery.","Updated daily with world, economy, and culture briefings."]},{title:"Coverage",links:[{label:"News",href:"/news.html"},{label:"Blog",href:"/blog.html"},{label:"Articles",href:"/articles.html"},{label:"Privacy Memo",href:"/privacy.html"}]},{title:"Resources",links:[{label:"Security Checklist",href:"/security.html"},{label:"RSS Feed",href:"/rss.xml"},{label:"Sitemap",href:"/sitemap.xml"},{label:"Offline Brief",href:"/offline.html"}]},{title:"Connect",links:[{label:"contact@miroza.online",href:"mailto:contact@miroza.online"},{label:"LinkedIn",href:"https://linkedin.com",external:!0},{label:"Twitter",href:"https://twitter.com",external:!0}]}];function u(){i()}function i(){const f=window.MIROZA.utils.qs(".site-footer");if(!f||f.dataset.componentReady==="true")return;const I=f.querySelector(".footer-grid");I&&(I.innerHTML="",l.forEach(h=>I.appendChild(t(h))),f.dataset.componentReady="true")}function t(f){const I=document.createElement("div"),h=document.createElement("h3");if(h.textContent=f.title,I.appendChild(h),Array.isArray(f.body)&&f.body.forEach(g=>{const w=document.createElement("p");w.textContent=g,I.appendChild(w)}),Array.isArray(f.links)){const g=document.createElement("ul");f.links.forEach(w=>{const n=document.createElement("li"),y=document.createElement("a");y.href=w.href,y.textContent=w.label,y.setAttribute("data-prefetch",""),w.external&&(y.target="_blank",y.rel="noopener noreferrer"),n.appendChild(y),g.appendChild(n)}),I.appendChild(g)}return I}return{init:u,enhanceFooter:i}})();const se="(max-width: 600px) 100vw, (max-width: 1200px) 50vw, 400px",oe={src:"/assets/images/hero-insight-800.svg",srcset:"/assets/images/hero-insight-400.svg 400w, /assets/images/hero-insight-800.svg 800w, /assets/images/hero-insight-1200.svg 1200w",sizes:se,alt:"MIROZA featured story"};function ye(l,u={}){var b,r,A,v;if(!l||typeof l!="object")return null;const i=document.createElement("article");i.className="card fade-in",i.setAttribute("data-id",l.id),i.dataset.label=l.category||"Story",((r=(b=window.MIROZA.posts)==null?void 0:b.isTrending)==null?void 0:r.call(b,l.id))?i.dataset.trending="true":i.removeAttribute("data-trending"),typeof u.order=="number"&&i.style.setProperty("--card-order",u.order);const f=l.image||oe,I=document.createElement("picture");Array.isArray(f.sources)&&f.sources.forEach(o=>{const d=document.createElement("source");Object.entries(o||{}).forEach(([c,M])=>{M&&d.setAttribute(c,M)}),I.appendChild(d)});const h=document.createElement("img");h.loading="lazy",h.decoding="async",h.src=f.src||oe.src,f.srcset&&h.setAttribute("srcset",f.srcset),h.setAttribute("sizes",f.sizes||se),h.alt=f.alt||l.title,h.width=400,h.height=225,I.appendChild(h),i.appendChild(I);const g=document.createElement("div");g.className="card-content";const w=document.createElement("h3");w.className="card-title",w.innerHTML=window.MIROZA.utils.safeHTML(l.title);const n=document.createElement("p");n.className="card-meta";const y=window.MIROZA.utils.formatNumber(l.views||0),T=l.metaLabel||`${l.category||"Story"} \u2022 ${y} views`;n.textContent=T;const _=document.createElement("p");_.className="card-excerpt",_.innerHTML=window.MIROZA.utils.safeHTML(l.excerpt);const S=document.createElement("a");return S.href=l.link||"/articles/"+l.slug+".html",S.textContent="Read More \u2192",S.className="read-more",S.setAttribute("data-prefetch",""),S.setAttribute("data-transition",""),S.dataset.trackStory=(v=(A=l.id)!=null?A:l.slug)!=null?v:"",S.dataset.trackSlug=l.slug||"",S.dataset.trackTitle=l.title,S.dataset.trackCategory=l.category||"Story",g.appendChild(w),g.appendChild(n),g.appendChild(_),g.appendChild(S),i.appendChild(g),i}window.MIROZA.buildCard=ye,window.MIROZA.hero=(function(){const i=["Climate finance, corridors, and civic infrastructure.","Ports, policy, and the people connecting them.","Signals our partners brief boards with before dawn.","Emerging market pilots, resilience, and governance."];let t=[],f=0,I=null,h=0,g=null,w=!1;const n={tag:null,title:null,excerpt:null,link:null,picture:null,image:null,advance:null,tagline:null};function y(){n.tag=window.MIROZA.utils.qs("#hero-tag"),n.title=window.MIROZA.utils.qs("[data-hero-title]"),n.excerpt=window.MIROZA.utils.qs("[data-hero-excerpt]"),n.link=window.MIROZA.utils.qs("#hero-link"),n.picture=window.MIROZA.utils.qs("#hero-picture"),n.image=window.MIROZA.utils.qs("#hero-image"),n.advance=window.MIROZA.utils.qs(".hero-advance"),n.tagline=window.MIROZA.utils.qs("[data-hero-tagline]")}function T(){var L;w||(w=!0,(L=n.advance)==null||L.addEventListener("click",()=>c(!0)))}function _(){I&&(window.clearInterval(I),I=null)}function S(){t.length<=1||window.MIROZA.utils.prefersReducedMotion()||(_(),I=window.setInterval(()=>c(!1),12e3))}function b(){if(!n.tagline||i.length<2){i.length===1&&d(i[0]);return}r(),d(i[h]),!window.MIROZA.utils.prefersReducedMotion()&&(g=window.setInterval(()=>A(),9e3))}function r(){g&&(window.clearInterval(g),g=null)}function A(){h=(h+1)%i.length,d(i[h])}function v(L){return L.link||(L.slug?`/articles/${L.slug}.html`:"#")}function o(L){var C,Z;if(!L)return;const z=window.MIROZA.utils.safeHTML;n.tag&&(n.tag.textContent=L.category||"Featured Story"),n.title&&(n.title.innerHTML=z(L.title)),n.excerpt&&(n.excerpt.innerHTML=z(L.excerpt)),n.link&&(n.link.href=v(L),n.link.setAttribute("data-prefetch",""),n.link.dataset.trackStory=(Z=(C=L.id)!=null?C:L.slug)!=null?Z:"hero",n.link.dataset.trackSlug=L.slug||"",n.link.dataset.trackTitle=L.title,n.link.dataset.trackCategory=L.category||"Story");const m=L.image||oe;n.image&&(n.image.src=m.src||oe.src,m.srcset&&(n.image.srcset=m.srcset),n.image.sizes=m.sizes||se,n.image.alt=m.alt||L.title),n.picture&&(n.picture.dataset.storyId=L.id)}function d(L){!n.tagline||!L||(n.tagline.textContent=L)}function c(L=!1){t.length&&(f=(f+1)%t.length,o(t[f]),L&&S())}function M(L=[]){y(),t=L.filter(Boolean),f=0,t.length&&(o(t[0]),T(),S(),b())}function p(L=[]){if(t=L.filter(Boolean),f=0,!t.length){_(),r();return}o(t[0]),S(),b()}return{mount:M,setItems:p,next:()=>c(!0)}})(),window.MIROZA.theme=(function(){const l=ge;function u(){return document.documentElement.dataset.theme||"light"}function i(h,{persist:g=!0}={}){const w=h==="dark"?"dark":"light";if(document.documentElement.dataset.theme=w,g)try{localStorage.setItem(l,w)}catch(n){}f()}function t(){i(u()==="light"?"dark":"light")}function f(){const h=window.MIROZA.utils.qs(".theme-toggle img");if(!h)return;const g=u()==="light";h.src=g?"/assets/icons/moon.svg":"/assets/icons/sun.svg",h.alt=g?"Enable dark mode":"Enable light mode"}function I(){const h=he();h&&h!==u()&&(document.documentElement.dataset.theme=h),f()}return{init:I,toggle:t,set:i}})(),window.MIROZA.nav=(function(){let l=!1,u,i;function t(){l?(u.classList.add("open"),i.setAttribute("aria-expanded","true"),i.innerHTML='<img src="/assets/icons/close.svg" alt="Close" width="24" height="24" />'):(u.classList.remove("open"),i.setAttribute("aria-expanded","false"),i.innerHTML='<img src="/assets/icons/menu.svg" alt="Menu" width="24" height="24" />')}function f(){var h;l=!l,t(),l?(h=u.querySelector("a"))==null||h.focus():i.focus()}function I(){u=window.MIROZA.utils.qs(".main-nav"),i=window.MIROZA.utils.qs(".menu-toggle"),!(!u||!i)&&i.addEventListener("click",f)}return{init:I,toggle:f}})(),window.MIROZA.posts=(function(){const l="/data/articles.json",u="/data/posts.json",i="/data/news.json";let t=[],f=null,I=[],h=new Set,g=[];const w=new Map;function n(a){return(a||"").toLowerCase()}function y(a,R="article"){const x=n(a);return x?x==="india-news"?"news":x:R}function T(a){const R=n(a);return R==="news"||R==="india"}function _(a){return n(a)==="blog"}function S(a){const R=n(a);return R?R!=="news"&&R!=="blog":!1}function b(a,R,x){if(!R)return"#";const q=y(a),N=n(x);return q==="blog"||N==="blog"?`/blogs/${R}.html`:q==="news"||N==="news"||N==="india"?`/news/${R}.html`:`/articles/${R}.html`}function r(a,R){if(!a)return!1;const x=n(R);return x?y(a.contentType||a.category)===x:!1}function A(a,R){return a?typeof a=="string"?{src:a,alt:R||"Story art",sizes:se}:{src:a.src||oe.src,srcset:a.srcset||oe.srcset,sizes:a.sizes||se,alt:a.alt||R||oe.alt,sources:Array.isArray(a.sources)?a.sources:void 0}:{...oe,alt:R||oe.alt}}function v(a){if(!a)return"";const R=new Date(a);if(Number.isNaN(R.getTime()))return"";try{return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(R)}catch(x){return R.toISOString().slice(0,10)}}function o(a,R,x="article"){const q=a.slug||`story-${a.id||R+1}`,N=a.category||"Story",H=n(N),Y=y(a.contentType||x),e=Date.parse(a.date||a.updated||"")||Date.now()-R,s=a.link||a.contentFile||b(Y,q,N),O=a.metaLabel||[N,v(a.date)].filter(Boolean).join(" \u2022 "),k=a.excerpt||a.summary||"",B=A(a.image,a.title),U=H==="news"?1150-R*12:1600-R*20,G=typeof a.views=="number"?a.views:U;return{...a,slug:q,category:N,link:s,dateValue:e,metaLabel:O,excerpt:k,image:B,views:G,contentType:Y,__source:a.__source||"json"}}function d(a,R){if(!a)return null;const x=a.slug||`news-${R+1}`,q=a.category||"News",N=o({...a,id:a.id||`news-${R+1}`,slug:x,category:q,contentFile:a.contentFile},R+1e3,"news"),H=v(N.date),Y=[q,H].filter(Boolean);return N.metaLabel=Y.join(" \u2022 ")||q,N.views=N.views||1200-R*15,N.region=q,N}function c(){return window.MIROZA.feedTools.fetchJsonArray(l).catch(a=>(console.warn("MIROZA: Falling back to legacy posts feed",a),window.MIROZA.feedTools.fetchJsonArray(u))).catch(()=>window.MIROZA.feedTools.scanType("articles")).catch(a=>(console.error("MIROZA: Unable to load article feed",a),[]))}function M(){return window.MIROZA.feedTools.fetchJsonArray(i).catch(()=>window.MIROZA.feedTools.scanType("news")).catch(a=>(console.error("MIROZA: Unable to load news feed",a),[]))}function p(a){return Array.isArray(a)?a:[]}function L(){return Promise.all([c(),M()]).then(([a,R])=>{const x=p(a).map((N,H)=>o(N,H,"article")).filter(N=>!_(N.category)).sort((N,H)=>(H.dateValue||0)-(N.dateValue||0)),q=p(R).map((N,H)=>d(N,H)).filter(Boolean).sort((N,H)=>(H.dateValue||0)-(N.dateValue||0));return z(R),t=[...q,...x],m(),t}).catch(a=>(console.error("Posts load failed",a),t=[],m(),t))}function z(a){var R,x;if((x=(R=window.MIROZA)==null?void 0:R.indiaNews)!=null&&x.prime&&Array.isArray(a)&&a.length)try{window.MIROZA.indiaNews.prime(a)}catch(q){console.warn("MIROZA: Unable to seed India desk from posts module",q)}}function m(){w.clear(),t.forEach(x=>{var N,H,Y;const q=((Y=(H=(N=x.id)!=null?N:x.slug)!=null?H:x.link)!=null?Y:Math.random()).toString();w.set(q,x)}),I=t.filter(x=>r(x,"article")).slice().sort((x,q)=>(q.dateValue||0)-(x.dateValue||0)),g=t.slice().sort((x,q)=>(q.views||0)-(x.views||0)).slice(0,8),h=new Set(g.map(x=>x.id))}function C(a){const R=n(a);return R==="news"?E():R==="article"?F():t.filter(x=>n(x.category)===R).sort((x,q)=>(q.dateValue||0)-(x.dateValue||0))}function Z(a){if(!Array.isArray(a)||!a.length)return t.slice();const R=a.map(N=>n(N)),x=R.includes("article"),q=R.includes("news");return t.filter(N=>{const H=n(N.category);return x&&r(N,"article")||q&&r(N,"news")?!0:R.includes(H)}).sort((N,H)=>(H.dateValue||0)-(N.dateValue||0))}function D(a){return a?a.split(",").map(R=>n(R)).filter(Boolean):[]}function $(a){var x,q;const R=((q=(x=window.MIROZA.utils)==null?void 0:x.qsa)==null?void 0:q.call(x,".chip"))||[];R.length&&R.forEach(N=>{let H="";try{const e=new URL(N.href,window.location.origin).searchParams.get("topic");H=n(e||N.textContent||""),e?N.setAttribute("aria-current",H&&H===a?"page":"false"):N.setAttribute("aria-current",a?"false":"page")}catch(Y){N.setAttribute("aria-current",a?"false":"page")}})}function j(a){var x,q,N;const R=(q=(x=window.MIROZA.utils)==null?void 0:x.qs)==null?void 0:q.call(x,"[data-category-label]");R&&(R.dataset.defaultTitle||(R.dataset.defaultTitle=((N=R.textContent)==null?void 0:N.trim())||""),a?R.textContent=`${a} Briefings`:R.dataset.defaultTitle&&(R.textContent=R.dataset.defaultTitle))}function W(){return g.slice(0,5)}function K(a){return h.has(a)}function Q(){const a=window.MIROZA.utils.qs("#trending-list");a&&(a.innerHTML="",W().forEach(R=>{const x=document.createElement("li"),q=document.createElement("a");q.href=R.link||"/articles/"+R.slug+".html",q.textContent=R.title,q.setAttribute("data-prefetch",""),q.setAttribute("data-transition","");const N=document.createElement("span");N.className="card-meta",N.textContent=R.metaLabel||window.MIROZA.utils.formatNumber(R.views||0)+" views",x.appendChild(q),x.appendChild(N),a.appendChild(x)}))}function E(){return t.filter(a=>r(a,"news")).sort((a,R)=>(R.dateValue||0)-(a.dateValue||0))}function F(){return t.filter(a=>r(a,"article")).sort((a,R)=>(R.dateValue||0)-(a.dateValue||0))}function P(){var R,x,q;const a=(x=(R=window.MIROZA.utils)==null?void 0:R.qs)==null?void 0:x.call(R,"[data-home-feed]");return!!((q=a==null?void 0:a.dataset)!=null&&q.homeFeedManaged)}function J(){var a,R,x,q,N;try{if(!P()){let O=function(U){Array.isArray(U)&&(e=U.map(G=>({...G}))),s=[...Y,...e].sort((G,ae)=>{const X=G.dateValue||Date.parse(G.date||0)||0;return(ae.dateValue||Date.parse(ae.date||0)||0)-X})};const Y=[...t];let e=[],s=[];O();let k="all";const B=window.MIROZA.pagination.mount({targetSelector:"#latest-cards",controlsSelector:"#latest-pagination",getData:()=>V(s,k),pageSize:8,emptyMessage:"Fresh stories are on the way.",mode:"load-more",autoLoad:!0});(a=window.MIROZA.filters)==null||a.initLatest({onChange:U=>{k=U,B==null||B.render()}}),(R=window.MIROZA.blogs)!=null&&R.ready&&window.MIROZA.blogs.ready().then(()=>{const U=window.MIROZA.blogs.all?window.MIROZA.blogs.all():window.MIROZA.blogs.latest(20);O(U),B==null||B.render({reset:!0})}).catch(()=>{})}window.MIROZA.pagination.mount({targetSelector:"#news-cards",controlsSelector:"#news-pagination",getData:()=>E(),pageSize:6,emptyMessage:"News stories publishing soon.",mode:"load-more"}),window.MIROZA.pagination.mount({targetSelector:"#articles-cards",controlsSelector:"#articles-pagination",getData:()=>F(),pageSize:6,emptyMessage:"Long-form stories publishing soon.",mode:"load-more"}),Q();const H=I.slice(0,5);(x=window.MIROZA.hero)==null||x.mount(H),(N=(q=window.MIROZA.ui)==null?void 0:q.hydrateLazySections)==null||N.call(q),console.info("[MIROZA] Home sections rendered",{totalPosts:t.length,latestRendered:latestOrder.length,heroStories:H.length})}catch(H){console.error("MIROZA: Failed to render home layout",H);const Y=document.getElementById("latest-cards");if(Y){Y.innerHTML="";const e=document.createElement("p");e.className="card-excerpt",e.textContent="We hit a snag while loading stories. Please refresh to try again.",Y.appendChild(e)}}}function V(a,R){if(R==="all")return a;const x=n(R);return x==="article"?a.filter(q=>r(q,"article")):x==="news"?a.filter(q=>r(q,"news")):x==="blog"?a.filter(q=>r(q,"blog")):a.filter(q=>n(q.category)===x)}function ee(){var O;const a=document.body.dataset.category;if(!a)return;if((a||"").toLowerCase()==="blog"){(O=window.MIROZA.blogs)==null||O.ready().then(()=>window.MIROZA.blogs.mountCategorySection()).catch(()=>{}),Q();return}const x=D(document.body.dataset.categories||""),q=typeof URLSearchParams!="undefined"?new URLSearchParams(window.location.search||""):null,N=(q==null?void 0:q.get("topic"))||"",H=n(N),Y=x.length?Z(x):C(a),e=H?Y.filter(k=>n(k.category)===H):Y,s=H&&N?`${N} coverage is publishing soon.`:`${a} stories publishing soon.`;j(N),$(H),window.MIROZA.pagination.mount({targetSelector:"#category-list",controlsSelector:"#category-pagination",getData:()=>e,pageSize:10,emptyMessage:s,mode:"load-more",autoLoad:!0}),Q()}function te(){const a=document.body.dataset.page;a==="home"&&J(),a==="category"&&ee(),a||Q()}function ie(){return f?f.then(()=>te()):f=L().then(()=>(te(),t)),f}function ne(){return f!=null?f:f=L()}function re(){return I.slice(0,5)}function le(a){return a?w.get(a.toString())||t.find(R=>(R.slug||"")===a):null}function me(a){return t.filter(R=>r(R,a))}return{init:ie,ready:ne,posts:()=>t,filterByCategory:C,trending:W,isTrending:K,heroFeed:re,byId:le,byType:me}})(),window.MIROZA.categories=(function(){const l="/data/categories.json";let u=[],i=null;function t(){f()&&I()}function f(){var o,d,c,M;return!!((d=(o=window.MIROZA.utils)==null?void 0:o.qs)!=null&&d.call(o,"[data-category-directory]"))||!!((M=(c=window.MIROZA.utils)==null?void 0:c.qs)!=null&&M.call(c,"[data-category-chips]"))}function I(){return i||(i=h()),i}function h(){return fetch(l).then(o=>{if(!o.ok)throw new Error(`Categories feed responded with ${o.status}`);return o.json()}).then(o=>(u=g(o),_(),S(),b(),u)).catch(o=>(console.warn("MIROZA: Unable to load categories feed",o),u=[],_(!0),u))}function g(o){return(Array.isArray(o)?o:[]).map(c=>{var Z,D,$,j;const M=ce(c.slug||c.label||""),p=c.label||c.title||w(M),L=c.href||fe(M)||n(p),z=typeof c.count=="number"?c.count:Array.isArray(c.items)?c.items.length:0,m=c.updated||c.latestDate||((D=(Z=c.previews)==null?void 0:Z[0])==null?void 0:D.date)||((j=($=c.items)==null?void 0:$[0])==null?void 0:j.date)||null,C=Array.isArray(c.previews)?c.previews.slice(0,4):Array.isArray(c.items)?c.items.slice(0,4):[];return{slug:M,label:p,href:L,count:z,updated:m,updatedLabel:y(m),description:c.description||T(p,z,m),previews:C.map(W=>({title:W.title,link:W.link||(W.slug?`/articles/${W.slug}.html`:L),date:W.date,category:W.category||p}))}}).filter(c=>c.slug&&c.href).sort((c,M)=>{const p=Date.parse(c.updated||0)||0;return(Date.parse(M.updated||0)||0)-p})}function w(o){return o?o.replace(/-/g," ").replace(/\b\w/g,d=>d.toUpperCase()):"Stories"}function n(o){return o?`/articles.html?topic=${encodeURIComponent(o)}`:"/articles.html"}function y(o){if(!o)return"recently";const d=new Date(o);if(Number.isNaN(d.getTime()))return o;try{return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(d)}catch(c){return d.toISOString().split("T")[0]}}function T(o,d,c){const M=y(c);return`${d>0?`${d} stories`:"Fresh coverage"} \u2022 Updated ${M}`}function _(o=!1){var c,M;const d=((M=(c=window.MIROZA.utils)==null?void 0:c.qsa)==null?void 0:M.call(c,"[data-category-directory]"))||[];d.length&&d.forEach(p=>{const L=parseInt(p.dataset.categoryLimit||"",10)||u.length||6,z=u.slice(0,L);if(p.innerHTML="",!z.length){o?p.appendChild(v("Category data unavailable right now.")):(p.appendChild(A()),p.appendChild(A()));return}z.forEach((m,C)=>p.appendChild(r(m,C)))})}function S(){var d,c;const o=((c=(d=window.MIROZA.utils)==null?void 0:d.qsa)==null?void 0:c.call(d,"[data-category-chips]"))||[];!o.length||!u.length||o.forEach(M=>{const p=parseInt(M.dataset.categoryLimit||"",10)||u.length||8;M.innerHTML="",u.slice(0,p).forEach(z=>{const m=document.createElement("a");m.className="chip",m.href=z.href,m.textContent=z.label,m.setAttribute("data-prefetch",""),M.appendChild(m)});const L=document.createElement("a");L.className="chip",L.href="/articles.html",L.textContent="Reset",L.setAttribute("data-prefetch",""),M.appendChild(L)})}function b(){var d,c;if(!u.length)return;const o=u.map(M=>({slug:M.slug,label:M.label,count:M.count,href:M.href}));(c=(d=window.MIROZA.quickFind)==null?void 0:d.setCategories)==null||c.call(d,o)}function r(o,d){const c=document.createElement("article");c.className="category-card fade-in",c.style.setProperty("--card-order",d);const M=document.createElement("p");M.className="hero-tag",M.textContent="Category";const p=document.createElement("h3");p.textContent=o.label;const L=document.createElement("p");L.className="category-card__meta",L.textContent=`${o.count} stories \u2022 Updated ${o.updatedLabel}`;const z=document.createElement("p");z.className="category-card__description",z.textContent=o.description;const m=document.createElement("ul");if(m.className="category-card__previews",o.previews.length)o.previews.forEach(Z=>{const D=document.createElement("li"),$=document.createElement("a");$.href=Z.link||o.href,$.textContent=Z.title,$.setAttribute("data-prefetch",""),D.appendChild($),m.appendChild(D)});else{const Z=document.createElement("li");Z.textContent="Coverage refreshes shortly.",m.appendChild(Z)}const C=document.createElement("a");return C.href=o.href,C.className="text-link",C.textContent="Open coverage \u2192",C.setAttribute("data-prefetch",""),c.appendChild(M),c.appendChild(p),c.appendChild(L),c.appendChild(z),c.appendChild(m),c.appendChild(C),c}function A(){const o=document.createElement("article");return o.className="category-card skeleton",o.setAttribute("aria-hidden","true"),o}function v(o){const d=document.createElement("p");return d.className="category-directory__empty",d.textContent=o,d}return{init:t,ready:I,list:()=>u.slice()}})(),window.MIROZA.blogs=(function(){const l="/data/blogs.json";let u=[],i=[],t=null;function f(){return window.MIROZA.feedTools.fetchJsonArray(l).catch(()=>window.MIROZA.feedTools.scanType("blogs")).then(S=>(u=Array.isArray(S)?S:[],i=u.map(I).sort((b,r)=>(r.dateValue||0)-(b.dateValue||0)),i)).catch(S=>(console.error("MIROZA: Failed to load blogs",S),u=[],i=[],[]))}function I(S){const b=S.url||S.canonical||`/blogs/${S.slug||"blog-"+S.id}.html`,r=Date.parse(S.date||S.displayDate||"")||0,A=[S.displayDate,S.readTimeMinutes?`${S.readTimeMinutes} min read`:null].filter(Boolean);return{id:S.slug||`blog-${S.id}`,slug:S.slug,title:S.title,excerpt:S.excerpt,category:"Blog",link:b,metaLabel:A.join(" \u2022 ")||"Blog insight",date:S.date,dateValue:r,tags:S.tags||[],views:S.readTimeMinutes?S.readTimeMinutes*100:void 0,contentType:"blog",__source:S.__source||"json"}}function h(S=8){return i.slice(0,S)}function g(){return i.slice()}function w(){const S=window.MIROZA.utils.qs("#blog-cards"),b=window.MIROZA.utils.qs("#blog-pagination");if(!S)return;const r=h(8);if(S.innerHTML="",!r.length){const A=document.createElement("p");A.className="card-excerpt",A.textContent="Blogs are publishing soon.",S.appendChild(A),b&&(b.innerHTML="");return}if(r.forEach((A,v)=>{const o=window.MIROZA.buildCard(A,{order:v});o&&S.appendChild(o)}),b){b.innerHTML="";const A=document.createElement("p");A.className="card-meta",A.textContent=`Showing ${r.length} of ${i.length} blog posts`,b.appendChild(A)}}function n(){const S="#category-list",b="#category-pagination",r=window.MIROZA.utils.qs(S),A=window.MIROZA.utils.qs(b);if(!(!r||!A)){if(!i.length){r.innerHTML="";const v=document.createElement("p");v.className="card-excerpt",v.textContent="Blog posts are publishing soon.",r.appendChild(v),A.innerHTML="";return}window.MIROZA.pagination.mount({targetSelector:S,controlsSelector:b,getData:()=>i,pageSize:10,emptyMessage:"Blog posts are publishing soon.",mode:"load-more",autoLoad:!0})}}function y(){const S=document.body.dataset.page,b=(document.body.dataset.category||"").toLowerCase();S==="home"&&w(),S==="category"&&b==="blog"&&n()}function T(){return t||(t=f()),t.then(()=>y()),t}function _(){return t!=null?t:t=f()}return{init:T,ready:_,latest:h,all:g,renderHomeSection:w,mountCategorySection:n}})(),window.MIROZA.pagination=(function(){function l({targetSelector:u,controlsSelector:i,getData:t,pageSize:f=10,emptyMessage:I="More stories coming soon.",mode:h="paged",autoLoad:g=!1}){const w=window.MIROZA.utils.qs(u),n=window.MIROZA.utils.qs(i);if(!w||!n||typeof t!="function")return null;const y={page:0},T=h==="load-more";let _;function S(r){(typeof r=="boolean"?{reset:r}:r||{}).reset&&(y.page=0);const v=t()||[];if(!v.length){w.innerHTML="";const z=document.createElement("p");z.className="card-excerpt",z.textContent=I,w.appendChild(z),n.innerHTML="";return}const o=Math.max(1,Math.ceil(v.length/f));if(y.page=Math.min(y.page,o-1),T){b(v,o);return}const d=y.page*f,c=v.slice(d,d+f);w.innerHTML="",c.forEach((z,m)=>{const C=window.MIROZA.buildCard(z,{order:d+m});C&&w.appendChild(C)}),n.innerHTML="";const M=document.createElement("button");M.type="button",M.textContent="Previous",M.disabled=y.page===0,M.addEventListener("click",()=>{y.page>0&&(y.page--,S())});const p=document.createElement("span");p.className="page-indicator",p.textContent=`Page ${y.page+1} of ${o}`;const L=document.createElement("button");L.type="button",L.textContent="Next",L.disabled=y.page>=o-1,L.addEventListener("click",()=>{y.page<o-1&&(y.page++,S())}),n.appendChild(M),n.appendChild(p),n.appendChild(L)}S();function b(r,A){const v=Math.min((y.page+1)*f,r.length);w.innerHTML="",r.slice(0,v).forEach((c,M)=>{const p=window.MIROZA.buildCard(c,{order:M});p&&w.appendChild(p)}),n.innerHTML="";const o=document.createElement("button");o.type="button",o.className="load-more-btn";const d=y.page<A-1;o.textContent=d?"Load more stories":"All stories loaded",o.disabled=!d,o.addEventListener("click",()=>{y.page<A-1&&(y.page++,S())}),n.appendChild(o),g&&d&&"IntersectionObserver"in window&&(_==null||_.disconnect(),_=new IntersectionObserver(c=>{c.forEach(M=>{M.isIntersecting&&!o.disabled&&o.click()})},{rootMargin:"200px 0px"}),_.observe(o))}return{render:S}}return{mount:l}})(),window.MIROZA.indiaNews=(function(){const l="/data/news.json";let u=[],i=null,t=null;function f(b){const r=h(b);return r.length?(u=r,i=Promise.resolve(u),!0):!1}function I(){return fetch(l).then(b=>b.json()).then(b=>(f(b),u)).catch(b=>(console.error("MIROZA: Unable to load India news feed",b),u=[],u))}function h(b){return(Array.isArray(b)?b:[]).map((A,v)=>{const o=A.slug||`india-news-${v+1}`,d=A.date||"",c=g(d),M=A.category||"India",p=A.title||"India desk update";return{id:o,slug:o,title:p,excerpt:A.excerpt||"",category:M,date:d,metaLabel:c?`${M} \u2022 ${c}`:M,link:A.contentFile||`/news/${o}.html`,image:A.image?{src:A.image,alt:p,sizes:se}:oe}}).sort((A,v)=>{const o=new Date(A.date||0).getTime();return new Date(v.date||0).getTime()-o})}function g(b){if(!b)return"";const r=new Date(b);if(isNaN(r))return b;try{return new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(r)}catch(A){return r.toISOString().slice(0,10)}}function w(){var b,r;((r=(b=document.body)==null?void 0:b.dataset)==null?void 0:r.page)==="home"&&window.MIROZA.utils.qs("#india-news-cards")&&window.MIROZA.pagination.mount({targetSelector:"#india-news-cards",controlsSelector:"#india-news-controls",getData:()=>u,pageSize:4,emptyMessage:"India desk coverage publishes shortly.",mode:"load-more",autoLoad:!0})}function n(){var b,r;((r=(b=document.body)==null?void 0:b.dataset)==null?void 0:r.page)==="india-news"&&window.MIROZA.utils.qs("#india-news-list")&&window.MIROZA.pagination.mount({targetSelector:"#india-news-list",controlsSelector:"#india-news-pagination",getData:()=>u,pageSize:6,emptyMessage:"India desk stories are being prepared.",mode:"load-more",autoLoad:!0})}function y(){var r,A;const b=(A=(r=document.body)==null?void 0:r.dataset)==null?void 0:A.page;if(!(!b||t===b)){if(b==="home"){w(),t=b;return}b==="india-news"&&(n(),t=b)}}function T(){var r,A;const b=(A=(r=document.body)==null?void 0:r.dataset)==null?void 0:A.page;b!=="home"&&b!=="india-news"||_().then(()=>y())}function _(){return i||(i=I()),i}function S(b){var r,A;if(f(b)){const v=(A=(r=document.body)==null?void 0:r.dataset)==null?void 0:A.page;(v==="home"||v==="india-news")&&window.requestAnimationFrame(()=>y())}}return{init:T,ready:_,items:()=>u.slice(),prime:S}})(),window.MIROZA.prefetch=(function(){const l="relList"in document.createElement("link")&&document.createElement("link").relList.supports&&document.createElement("link").relList.supports("prefetch");function u(t){const f=t.target.closest("a[data-prefetch]");if(!f||!l||f.dataset.prefetched)return;const I=document.createElement("link");I.rel="prefetch",I.href=f.href,document.head.appendChild(I),f.dataset.prefetched="true"}function i(){document.addEventListener("mouseover",u),document.addEventListener("touchstart",u,{passive:!0})}return{init:i}})(),window.MIROZA.ui=(function(){let l,u,i,t=!1,f;const I=2500;function h(){const b=window.scrollY||document.documentElement.scrollTop||0;l&&l.classList.toggle("is-stuck",b>24),u&&u.classList.toggle("visible",b>480)}function g(){u&&u.addEventListener("click",()=>{const b=window.MIROZA.utils.prefersReducedMotion()?"auto":"smooth";window.scrollTo({top:0,behavior:b})})}function w(){const b=window.MIROZA.utils.qsa("[data-lazy]");if(b.length){if(!("IntersectionObserver"in window)){b.forEach(r=>r.classList.add("lazy-ready"));return}i==null||i.disconnect(),i=new IntersectionObserver(r=>{r.forEach(A=>{A.isIntersecting&&(A.target.classList.add("lazy-ready"),i.unobserve(A.target))})},{rootMargin:"0px 0px -10% 0px"}),b.forEach(r=>i.observe(r)),window.clearTimeout(f),f=window.setTimeout(n,I)}}function n(){window.MIROZA.utils.qsa("[data-lazy]:not(.lazy-ready)").forEach(b=>b.classList.add("lazy-ready"))}function y(){l=window.MIROZA.utils.qs(".site-header"),u=window.MIROZA.utils.qs(".back-to-top"),g(),window.addEventListener("scroll",()=>{t||(t=!0,window.requestAnimationFrame(()=>{h(),t=!1}))},{passive:!0}),h(),w(),T()}function T(){const b=window.MIROZA.utils.qsa(".single-article img, main img[data-enhance-responsive]");b.length&&b.forEach(r=>{if(r&&(r.getAttribute("loading")||(r.loading="lazy"),r.decoding="async",!r.hasAttribute("srcset"))){const A=_(r.getAttribute("src"));A&&(r.setAttribute("srcset",A),r.hasAttribute("sizes")||r.setAttribute("sizes","(max-width: 900px) 100vw, 800px"))}})}function _(b){return!b||!/images\.(unsplash|pexels)\.com/i.test(b)?null:[480,768,1200].map(v=>`${S(b,v)} ${v}w`).join(", ")}function S(b,r){const A=`w=${r}`;if(/w=\d+/i.test(b))return b.replace(/w=\d+/gi,A);const v=b.includes("?")?"&":"?";return`${b}${v}${A}`}return{init:y,hydrateLazySections:w}})(),window.MIROZA.forms=(function(){const l="miroza_newsletter_optin";function i(y){return typeof y!="string"?"":window.DOMPurify?DOMPurify.sanitize(y,{ALLOWED_TAGS:[],ALLOWED_ATTR:[]}):y.replace(/[<>]/g,"")}function t(y){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(y)}function f(y,T,_){try{if(y==="get")return localStorage.getItem(T);y==="set"&&localStorage.setItem(T,_),y==="remove"&&localStorage.removeItem(T)}catch(S){}return null}function I(y,T,_="info"){y&&(y.textContent=T,y.dataset.state=_)}function h(y){y.classList.add("is-success"),window.MIROZA.utils.qsa("input, button",y).forEach(T=>{T.disabled=!0})}function g(y){return new Promise(T=>{window.setTimeout(()=>T({ok:!0,...y}),900)})}function w(){const y=window.MIROZA.utils.qs("#newsletter-form");if(!y)return;const T=y.querySelector('input[type="email"]'),_=y.querySelector(".form-feedback"),S=y.querySelector('button[type="submit"]');!T||!_||!S||(f("get",l)==="subscribed"&&(I(_,"You are already subscribed.","success"),h(y)),y.addEventListener("submit",b=>{if(b.preventDefault(),y.classList.contains("is-loading"))return;const r=i(T.value.trim());if(!t(r)){I(_,"Enter a valid email address.","error"),T.focus();return}y.classList.add("is-loading"),S.disabled=!0,I(_,"Subscribing you now\u2026","pending");const A=v=>{y.classList.remove("is-loading"),v||(S.disabled=!1)};g({email:r}).then(()=>{I(_,"You are officially on the list. Welcome aboard!","success"),f("set",l,"subscribed"),h(y),A(!0)}).catch(()=>{I(_,"We could not reach the server. Please try again.","error"),A(!1)})}))}function n(){w()}return{init:n}})(),window.MIROZA.community=(function(){const l="miroza_comments_v1",u="miroza_likes_v1";let t={},f=null;function I(m){return typeof m!="string"?"":window.DOMPurify?DOMPurify.sanitize(m,{ALLOWED_TAGS:[],ALLOWED_ATTR:[]}):m.replace(/[<>]/g,"")}function h(){const m=document.body;return m.dataset.articleId?m.dataset.articleId:m.dataset.slug?m.dataset.slug:window.location.pathname.replace(/\/+/g,"/").replace(/\/$/,"")||"home"}function g(){try{const m=localStorage.getItem(l);return m&&(t=JSON.parse(m)||{}),t}catch(m){return t}}function w(m){t=m;try{localStorage.setItem(l,JSON.stringify(m))}catch(C){}}function n(){if(f)return f;try{const m=localStorage.getItem(u);f=m?JSON.parse(m):{}}catch(m){f={}}return f}function y(m){f=m;try{localStorage.setItem(u,JSON.stringify(m))}catch(C){}}function T(m,C,Z="info"){m&&(m.textContent=C,m.dataset.state=Z)}function _(m){try{return new Intl.DateTimeFormat("en",{month:"short",day:"numeric",year:"numeric"}).format(new Date(m))}catch(C){return new Date(m).toLocaleDateString()}}function S(m,C){if(m){if(m.innerHTML="",!C.length){const Z=document.createElement("li");Z.className="card-meta",Z.textContent="No comments yet. Share your perspective below (stored locally only).",m.appendChild(Z);return}C.forEach(Z=>{const D=document.createElement("li");D.className="comment-card";const $=document.createElement("div");$.className="comment-meta",$.textContent=`${Z.name} \u2022 ${_(Z.ts)}`;const j=document.createElement("p");j.textContent=Z.comment,D.appendChild($),D.appendChild(j),m.appendChild(D)})}}function b(m){const C=h(),Z={...g()},D=Z[C]?[...Z[C]]:[];return D.push(m),Z[C]=D.slice(-20),w(Z),Z[C]}function r(m,C){const Z=h(),D={...n()},$=!D[Z];$?D[Z]=!0:delete D[Z],y(D),m&&(m.dataset.liked=$?"true":"false",m.setAttribute("aria-pressed",$?"true":"false"),m.textContent=$?"\u2665 Liked":"\u2661 Appreciate"),T(C,$?"Thanks for the love!":"Like removed.","success")}function A(m,C,Z){var K,Q;const D=window.location.href,$=document.title,j=((K=document.querySelector('meta[name="description"]'))==null?void 0:K.content)||"Discover more from MIROZA.",W=encodeURIComponent(D);if(m==="like"){r(Z,C);return}if(m==="copy"){(Q=navigator.clipboard)!=null&&Q.writeText?navigator.clipboard.writeText(D).then(()=>T(C,"Link copied to clipboard.","success")).catch(()=>v(D,C)):v(D,C);return}if(m==="twitter"){window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent($)}&url=${W}`,"_blank","noopener"),T(C,"Opening X (Twitter)\u2026","pending");return}if(m==="linkedin"){window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${W}`,"_blank","noopener"),T(C,"Opening LinkedIn\u2026","pending");return}if(m==="native"&&navigator.share){navigator.share({title:$,text:j,url:D}).then(()=>T(C,"Thanks for sharing!","success")).catch(()=>T(C,"Share cancelled.","info"));return}A("copy",C)}function v(m,C){window.prompt("Copy this link and share it anywhere:",m)!==null&&T(C,"Copy the highlighted link to share.","info")}function o(m){let C=m.querySelector(".share-actions");if(!C){C=document.createElement("div"),C.className="share-actions",C.setAttribute("aria-label","Share actions");const D=[{type:"native",label:"Quick share"},{type:"twitter",label:"Post to X"},{type:"linkedin",label:"Share on LinkedIn"},{type:"copy",label:"Copy link"}],$=document.createDocumentFragment();D.forEach(Q=>{const E=document.createElement("button");E.type="button",E.dataset.share=Q.type,E.textContent=Q.label,$.appendChild(E)});const j=document.createElement("button");j.type="button",j.dataset.share="like",j.classList.add("like-btn");const W=!!n()[h()];j.dataset.liked=W?"true":"false",j.setAttribute("aria-pressed",W?"true":"false"),j.textContent=W?"\u2665 Liked":"\u2661 Appreciate",$.appendChild(j),C.appendChild($);const K=m.querySelector("header");K?K.insertAdjacentElement("afterend",C):m.prepend(C)}let Z=m.querySelector(".share-feedback");return Z||(Z=document.createElement("p"),Z.className="form-feedback share-feedback",Z.setAttribute("aria-live","polite"),Z.textContent="",C.insertAdjacentElement("afterend",Z)),{block:C,feedback:Z}}function d(m){let C=m.querySelector(".comments");if(!C){const D=`comments-${(h().split("/").pop()||"story").replace(/[^a-z0-9]+/gi,"-")}`;C=document.createElement("section"),C.className="comments",C.setAttribute("aria-labelledby",`${D}-heading`),C.innerHTML=`
          <h2 id="${D}-heading">Join the conversation</h2>
          <form class="comment-form" novalidate>
            <label for="${D}-name">Name</label>
            <input type="text" id="${D}-name" name="name" maxlength="60" placeholder="Your name" required />
            <label for="${D}-body">Comment</label>
            <textarea id="${D}-body" name="comment" maxlength="500" placeholder="Be constructive and kind." required></textarea>
            <input type="text" name="company" class="hidden" tabindex="-1" autocomplete="off" aria-hidden="true" />
            <p class="form-feedback" aria-live="polite"></p>
            <button type="submit">Post comment</button>
          </form>
          <ul class="comment-list" aria-live="polite"></ul>
        `,m.appendChild(C)}return C}function c(m,C){!m||m.dataset.shareBound||(m.dataset.shareBound="true",m.addEventListener("click",Z=>{const D=Z.target.closest("button[data-share]");if(!D)return;const $=D.dataset.share;A($,C,D)}))}function M(m){const C=m.querySelector("form"),Z=m.querySelector(".comment-list"),D=C.querySelector(".form-feedback"),j=g()[h()]||[];S(Z,j),T(D,"Comments stay on this device until realtime APIs are wired up.","info"),C.addEventListener("submit",W=>{W.preventDefault();const K=new FormData(C);if(K.get("company")){C.reset();return}const Q=I((K.get("name")||"Guest").trim()).slice(0,60)||"Guest",E=I((K.get("comment")||"").trim());if(E.length<5){T(D,"Please add a bit more detail (minimum 5 characters).","error");return}const F={name:Q,comment:E,ts:Date.now()},P=b(F);S(Z,P),T(D,"Comment captured locally for preview. \u2705","success"),C.reset()})}function p(){if(document.body.dataset.page!=="article")return;const m=window.MIROZA.utils.qs(".single-article");if(!m)return;const{block:C,feedback:Z}=o(m);c(C,Z);const D=d(m);M(D)}function L(){p()}function z(){return{...n()}}return{init:L,getLikedMap:z}})(),window.MIROZA.breadcrumbs=(function(){const l={article:{label:"Articles",href:"/articles.html"},"blog-article":{label:"Blogs",href:"/blog.html"},"news-article":{label:"News",href:"/news.html"}};function u(){var y,T,_;const f=(T=(y=document.body)==null?void 0:y.dataset)==null?void 0:T.page;if(!f||!l[f])return;const I=window.MIROZA.utils.qs(".single-article")||window.MIROZA.utils.qs("main");if(!I||I.querySelector(".breadcrumbs"))return;const h=I.querySelector("h1")||window.MIROZA.utils.qs("h1"),g=(_=h==null?void 0:h.textContent)==null?void 0:_.trim();if(!g)return;const w=i(f,g),n=t(w);n&&I.insertAdjacentElement("afterbegin",n)}function i(f,I){const h=[{label:"Home",href:"/"}],g=l[f];return g&&h.push(g),h.push({label:I,current:!0}),h}function t(f){if(!Array.isArray(f)||f.length<2)return null;const I=document.createElement("nav");I.className="breadcrumbs",I.setAttribute("aria-label","Breadcrumb");const h=document.createElement("ol");return f.forEach(g=>{const w=document.createElement("li");if(g.current||!g.href)w.textContent=g.label,w.setAttribute("aria-current","page");else{const n=document.createElement("a");n.href=g.href,n.textContent=g.label,n.setAttribute("data-prefetch",""),w.appendChild(n)}h.appendChild(w)}),I.appendChild(h),I}return{init:u}})(),window.MIROZA.seo=(function(){const l=`${ue}/assets/images/hero-insight-1200.svg`,u=`${ue}/assets/icons/logo.svg`,i="news, blog, articles, analysis, intelligence, MIROZA",t="MIROZA Editorial Desk";function f(){if(!(document!=null&&document.head))return;const d=I();h(d),g(d)}function I(){var L;const d=o(),c=((L=window.location)==null?void 0:L.pathname)||"/",M=new URL(c,d).toString();let p=document.head.querySelector('link[rel="canonical"]');return p||(p=document.createElement("link"),p.rel="canonical",document.head.appendChild(p)),p.href=M,M}function h(d){var m,C;const c=(document.title||"MIROZA").trim(),M=r(),p=i,L=((C=(m=document.head.querySelector('meta[name="author"]'))==null?void 0:m.content)==null?void 0:C.trim())||t,z=A();b("description",M),b("keywords",p),b("author",L),b("last-modified",new Date(document.lastModified||Date.now()).toISOString()),b("og:title",c,"property"),b("og:description",M,"property"),b("og:url",d,"property"),b("og:image",z,"property"),b("twitter:title",c),b("twitter:description",M),b("twitter:image",z)}function g(d){w(d),n(),y()}function w(d){var D,$,j,W,K,Q;const c=($=(D=document.body)==null?void 0:D.dataset)==null?void 0:$.page;if(!["article","news-article","blog-article"].includes(c)||document.head.querySelector('script[type="application/ld+json"][data-seo="article"]')||_(C))return;const M=((W=(j=document.querySelector(".single-article h1"))==null?void 0:j.textContent)==null?void 0:W.trim())||document.title;if(!M)return;const p=r(),L=A(),z=((Q=(K=document.head.querySelector('meta[name="author"]'))==null?void 0:K.content)==null?void 0:Q.trim())||t,m=v(),C=c==="blog-article"?"BlogPosting":"NewsArticle",Z={"@context":"https://schema.org","@type":C,headline:M,description:p,image:L,datePublished:m,dateModified:new Date(document.lastModified||Date.now()).toISOString(),author:{"@type":"Organization",name:z},publisher:{"@type":"Organization",name:"MIROZA",logo:{"@type":"ImageObject",url:u}},mainEntityOfPage:d};T(Z,"article")}function n(){var L;const d=document.querySelector(".breadcrumbs ol");if(!d||document.head.querySelector('script[type="application/ld+json"][data-seo="breadcrumbs"]')||_("BreadcrumbList"))return;const c=o(),M=((L=document.head.querySelector('link[rel="canonical"]'))==null?void 0:L.href)||c,p=Array.from(d.querySelectorAll("li")).map((z,m)=>{const C=z.querySelector("a"),Z=C?new URL(C.getAttribute("href"),c).toString():M;return{"@type":"ListItem",position:m+1,name:z.textContent.trim(),item:Z}});p.length&&T({"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:p},"breadcrumbs")}function y(){var M,p;if(((p=(M=document.body)==null?void 0:M.dataset)==null?void 0:p.page)!=="home"||document.head.querySelector('script[type="application/ld+json"][data-seo="website"]')||_("WebSite"))return;const d=o(),c={"@context":"https://schema.org","@type":"WebSite",url:d,name:"MIROZA",potentialAction:{"@type":"SearchAction",target:`${d}/?q={search_term_string}`,"query-input":"required name=search_term_string"}};T(c,"website")}function T(d,c){const M=document.createElement("script");M.type="application/ld+json",M.dataset.seo=c,M.textContent=JSON.stringify(d),document.head.appendChild(M)}function _(d){return Array.from(document.head.querySelectorAll('script[type="application/ld+json"]')).some(M=>{try{const p=JSON.parse(M.textContent);return Array.isArray(p)?p.some(L=>S(L,d)):S(p,d)}catch(p){return!1}})}function S(d,c){if(!d||!d["@type"])return!1;const M=d["@type"];return Array.isArray(M)?M.includes(c):M===c}function b(d,c,M="name"){if(!c)return;let p=document.head.querySelector(`meta[${M}="${d}"]`);p||(p=document.createElement("meta"),p.setAttribute(M,d),document.head.appendChild(p));const L=p.getAttribute("content");(!L||/example\.com|lorem ipsum/i.test(L))&&p.setAttribute("content",c)}function r(){var M;const d=(M=document.head.querySelector('meta[name="description"]'))==null?void 0:M.getAttribute("content");if(d&&!/example\.com/i.test(d))return d;const c=document.querySelector(".single-article p, main p");if(c){const p=c.textContent.trim();if(p)return p.length>160?`${p.slice(0,157)}...`:p}return"MIROZA curates fast, accessible intelligence across news, blogs, and analytical articles."}function A(){const d=document.querySelector(".single-article img, .hero img"),c=(d==null?void 0:d.currentSrc)||(d==null?void 0:d.src);if(c)try{return new URL(c,o()).toString()}catch(M){return c}return l}function v(){const d=document.querySelector("time[datetime]"),c=document.head.querySelector('meta[name="date"], meta[property="article:published_time"]'),M=(d==null?void 0:d.getAttribute("datetime"))||(c==null?void 0:c.getAttribute("content"));if(M){const p=new Date(M);if(!isNaN(p))return p.toISOString()}return new Date(document.lastModified||Date.now()).toISOString()}function o(){try{const{protocol:d,host:c}=window.location;if(c&&!/localhost|127\.0\.0\.1/i.test(c))return`${d}//${c}`}catch(d){}return ue}return{init:f}})(),window.MIROZA.search=(function(){let i,t,f=[],I=[],h=[],g=-1,w;function n(){var o;i=window.MIROZA.utils.qs("#search"),t=window.MIROZA.utils.qs("#search-suggestions"),!(!i||!t)&&(y(),window.MIROZA.posts.ready().then(d=>{f=d||[]}).catch(()=>{}),(o=window.MIROZA.blogs)!=null&&o.ready&&window.MIROZA.blogs.ready().then(d=>{I=d?window.MIROZA.blogs.all?window.MIROZA.blogs.all():d:[]}).catch(()=>{}))}function y(){i.addEventListener("input",T,{passive:!0}),i.addEventListener("focus",()=>{i.value.trim().length>=2&&_(i.value.trim())}),i.addEventListener("keydown",b),document.addEventListener("click",o=>{o.target===i||t.contains(o.target)||v()}),t.addEventListener("mousedown",o=>o.preventDefault()),t.addEventListener("click",o=>{const d=o.target.closest(".search-suggestion");if(!d)return;const c=Number(d.dataset.index);A(c)})}function T(){const o=i.value.trim();if(window.clearTimeout(w),o.length<2){v();return}w=window.setTimeout(()=>_(o),120)}function _(o){const d=o.toLowerCase(),M=[...f,...I].filter(p=>[p.title,p.excerpt,p.category].filter(Boolean).join(" ").toLowerCase().includes(d)).slice(0,5).map(p=>({title:p.title,category:p.category||"Story",link:p.link||(p.slug?`/articles/${p.slug}.html`:"#")}));h=M,g=M.length?0:-1,S()}function S(){if(t){if(t.innerHTML="",!h.length){v();return}h.forEach((o,d)=>{const c=document.createElement("button");c.type="button",c.className="search-suggestion"+(d===g?" is-active":""),c.dataset.index=String(d),c.setAttribute("role","option");const M=document.createElement("strong");M.textContent=o.title;const p=document.createElement("span");p.textContent=o.category,c.appendChild(M),c.appendChild(p),t.appendChild(c)}),t.hidden=!1}}function b(o){t.hidden||(o.key==="ArrowDown"?(o.preventDefault(),r(1)):o.key==="ArrowUp"?(o.preventDefault(),r(-1)):o.key==="Enter"?g>-1&&(o.preventDefault(),A(g)):o.key==="Escape"&&v())}function r(o){h.length&&(g=(g+o+h.length)%h.length,S())}function A(o){const d=h[o];d&&(window.location.href=d.link,v())}function v(){t&&(t.hidden=!0,g=-1,t.innerHTML="")}return{init:n}})(),window.MIROZA.filters=(function(){let l=null;function u({onChange:t}={}){const f=window.MIROZA.utils.qs("#latest-filters");if(!f)return;const I=window.MIROZA.utils.qsa("button[data-filter]",f);if(!I.length)return;let h="all";function g(w){h=w,I.forEach(n=>n.setAttribute("aria-pressed",n.dataset.filter===h?"true":"false")),t==null||t(h)}l={setActive:g},f.addEventListener("click",w=>{const n=w.target.closest("button[data-filter]");!n||n.dataset.filter===h||g(n.dataset.filter)})}function i(t){t&&(l==null||l.setActive(t))}return{initLatest:u,setLatestFilter:i}})(),window.MIROZA.quickFind=(function(){const l={recent:"miroza_recent_reads_v1",saved:"miroza_saved_stories_v1"},u=8,i={recents:[],savedManual:[]},t={panel:null,toggle:null,recent:null,saved:null,categories:null,title:null},f=new Set;let I=[],h=[],g=null,w=[];function n(){T(),!(!t.panel||!t.toggle)&&(r(),_(),S(),b(),ne(),re(),le())}function y(e){w=Array.isArray(e)?e:[],le()}function T(){t.panel=document.getElementById("quick-find"),t.toggle=window.MIROZA.utils.qs(".quick-find-toggle"),t.recent=document.getElementById("quick-find-recent"),t.saved=document.getElementById("quick-find-saved"),t.categories=document.getElementById("quick-find-categories"),t.title=document.getElementById("quick-find-title")}function _(){window.MIROZA.utils.qsa("#latest-filters button[data-filter]").forEach(e=>{e!=null&&e.dataset.filter&&f.add(e.dataset.filter)})}function S(){var e;t.toggle.addEventListener("click",C),window.MIROZA.utils.qsa('[data-close="quick-find"]',t.panel).forEach(s=>s.addEventListener("click",m)),document.addEventListener("keydown",o),document.addEventListener("click",d,!0),t.panel.addEventListener("click",c),(e=t.categories)==null||e.addEventListener("click",M)}function b(){var O,k,B,U;const e=((k=(O=window.MIROZA.posts)==null?void 0:O.ready)==null?void 0:k.call(O))||Promise.resolve([]),s=((U=(B=window.MIROZA.blogs)==null?void 0:B.ready)==null?void 0:U.call(B).then(()=>window.MIROZA.blogs.all?window.MIROZA.blogs.all():[]))||Promise.resolve([]);Promise.all([e,s]).then(([G,ae])=>{I=[...G||[],...ae||[]],le(),re()}).catch(()=>{})}function r(){i.recents=A(l.recent),i.savedManual=A(l.saved)}function A(e){var s;try{const O=(s=window.localStorage)==null?void 0:s.getItem(e);return O?JSON.parse(O):[]}catch(O){return[]}}function v(e,s){var O;try{(O=window.localStorage)==null||O.setItem(e,JSON.stringify(s))}catch(k){}}function o(e){if(e.key==="Escape"&&Z()){e.preventDefault(),m();return}if((e.key==="k"||e.key==="K")&&(e.metaKey||e.ctrlKey)){const s=e.target;if(L(s))return;e.preventDefault(),z()}}function d(e){const s=e.target.closest("a[data-track-story]");if(!s)return;const O=D(s);O&&j(O)}function c(e){const s=e.target.closest("[data-quick-find-action]");if(s){const{quickFindAction:k,storyId:B,storyHref:U}=s.dataset;k==="save"&&Q(B,U),k==="remove"&&E(B,U);return}e.target.closest(".quick-find__details a")&&m()}function M(e){var k,B;const s=e.target.closest("button[data-category]");if(!s)return;const O=s.dataset.action;if(O==="filter"){const U=s.dataset.filterKey||s.dataset.category;U&&((B=(k=window.MIROZA.filters)==null?void 0:k.setLatestFilter)==null||B.call(k,U)),m(),Y(()=>p(U));return}O==="navigate"&&s.dataset.href&&(m(),window.location.href=s.dataset.href)}function p(e){e&&window.setTimeout(()=>{const s=window.MIROZA.utils.qs(`#latest-filters button[data-filter="${e}"]`);s==null||s.focus()},220)}function L(e){if(!e)return!1;const s=e.tagName;return e.isContentEditable||s==="INPUT"||s==="TEXTAREA"||s==="SELECT"}function z(){Z()||(g=document.activeElement,t.panel.hidden=!1,document.body.classList.add("quick-find-open"),t.toggle.setAttribute("aria-expanded","true"),window.requestAnimationFrame(()=>{var e;return(e=t.title)==null?void 0:e.focus()}),ne(),re())}function m(){var e;Z()&&(t.panel.hidden=!0,document.body.classList.remove("quick-find-open"),t.toggle.setAttribute("aria-expanded","false"),(e=g==null?void 0:g.focus)==null||e.call(g),g=null)}function C(){Z()?m():z()}function Z(){return!!t.panel&&!t.panel.hidden}function D(e){var U;const s=e.dataset||{},O=e.href;if(!O)return null;const k=$(s.trackStory||s.trackSlug),B=s.trackTitle||(k==null?void 0:k.title)||((U=e.textContent)==null?void 0:U.trim());return B?{id:s.trackStory||(k==null?void 0:k.id)||s.trackSlug||O,slug:s.trackSlug||(k==null?void 0:k.slug)||"",title:B,category:s.trackCategory||(k==null?void 0:k.category)||"Story",href:O,ts:Date.now()}:null}function $(e){var s,O;return e&&((O=(s=window.MIROZA.posts)==null?void 0:s.byId)==null?void 0:O.call(s,e))||null}function j(e){if(!e)return;const s=i.recents.filter(O=>!V(O,e.id,e.href));i.recents=[e,...s].slice(0,u),W(),Z()&&ne()}function W(){v(l.recent,i.recents)}function K(){v(l.saved,i.savedManual.slice(0,u))}function Q(e,s){const O=i.savedManual.findIndex(k=>V(k,e,s));if(O>-1)i.savedManual.splice(O,1);else{const k=F(e,s);k&&i.savedManual.unshift({...k,ts:Date.now()})}i.savedManual=i.savedManual.slice(0,u),K(),re(),ne()}function E(e,s){const O=i.savedManual.filter(k=>!V(k,e,s));O.length!==i.savedManual.length&&(i.savedManual=O,K(),re(),ne())}function F(e,s){return i.recents.find(O=>V(O,e,s))||i.savedManual.find(O=>V(O,e,s))||J($(e)||P(s))}function P(e){var s,O,k;if(!e||!I.length)return null;try{const U=(s=new URL(e,window.location.origin).pathname.split("/").pop())==null?void 0:s.replace(".html","");return U&&((k=(O=window.MIROZA.posts)==null?void 0:O.byId)==null?void 0:k.call(O,U))||null}catch(B){return null}}function J(e){if(!e)return null;const s=Date.parse(e.date||"")||Date.now();return{id:e.id||e.slug||e.link,slug:e.slug||"",title:e.title,category:e.category||"Story",href:e.link||(e.slug?`/articles/${e.slug}.html`:"#"),ts:s}}function V(e,s,O){return e?!!(s&&(e.id===s||e.slug===s)||O&&e.href===O):!1}function ee(){return h=te(),h}function te(){const e=new Set,s=i.savedManual.map(k=>({...k,origin:"manual"})),O=ie();return[...s,...O].filter(k=>{const B=k.id||k.href;return!B||e.has(B)?!1:(e.add(B),!0)})}function ie(){var s,O;const e=((O=(s=window.MIROZA.community)==null?void 0:s.getLikedMap)==null?void 0:O.call(s))||{};return Object.keys(e).map(k=>{var G,ae;const B=k.split("/").filter(Boolean).pop(),U=B?((ae=(G=window.MIROZA.posts)==null?void 0:G.byId)==null?void 0:ae.call(G,B))||I.find(X=>X.slug===B):null;return U?{...J(U),origin:"liked"}:null}).filter(Boolean)}function ne(){if(!t.recent)return;const e=document.createDocumentFragment(),s=i.recents,O=new Set(ee().map(k=>k.id||k.href));s.length?s.forEach(k=>e.appendChild(N(k,{allowToggle:!0,isPinned:O.has(k.id||k.href)}))):e.appendChild(q("Explore a story to see it here.")),t.recent.innerHTML="",t.recent.appendChild(e)}function re(){if(!t.saved)return;const e=document.createDocumentFragment(),s=ee();s.length?s.forEach(O=>e.appendChild(N(O,{allowRemoval:O.origin==="manual"}))):e.appendChild(q("Tap the heart inside an article or pin a recent story.")),t.saved.innerHTML="",t.saved.appendChild(e)}function le(){if(!t.categories)return;t.categories.innerHTML="";const e=me();if(!e.length){const s=document.createElement("p");s.className="quick-find__meta",s.textContent="Stories are loading\u2026",t.categories.appendChild(s);return}e.forEach(s=>{const O=document.createElement("button");O.type="button",O.dataset.category=s.slug,O.dataset.action=s.action,s.filterKey&&(O.dataset.filterKey=s.filterKey),s.href&&(O.dataset.href=s.href),O.textContent=`${s.label} (${s.count})`,t.categories.appendChild(O)})}function me(){if(w.length)return w.slice(0,8).map(s=>{const O=x(s.slug||s.label),k=s.label||s.title||O,B=typeof s.count=="number"?s.count:0,U=R(O);if(U)return{slug:O,label:k,count:B,action:"filter",filterKey:U};const G=s.href||a(O);return G?{slug:O,label:k,count:B,action:"navigate",href:G}:null}).filter(Boolean);if(!I.length)return[];const e={};return I.forEach(s=>{const O=(s.category||"").trim();if(!O)return;const k=x(O);k&&(e[k]||(e[k]={label:O,slug:k,count:0}),e[k].count+=1,e[k].label=O)}),Object.values(e).sort((s,O)=>O.count-s.count).slice(0,8).map(s=>{const O=R(s.slug);if(O)return{...s,action:"filter",filterKey:O};const k=a(s.slug);return k?{...s,action:"navigate",href:k}:null}).filter(Boolean)}function a(e){return e?fe(e):null}function R(e){if(!e)return null;if(f.has(e))return e;if(e.endsWith("s")){const s=e.slice(0,-1);if(f.has(s))return s}return null}function x(e){return(e||"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function q(e){const s=document.createElement("li");return s.className="empty",s.textContent=e,s}function N(e,{allowToggle:s=!1,isPinned:O=!1,allowRemoval:k=!1}={}){const B=document.createElement("li"),U=document.createElement("div");U.className="quick-find__details";const G=document.createElement("a");G.href=e.href||"#",G.textContent=e.title,G.setAttribute("data-prefetch",""),G.setAttribute("data-track-story",e.id||e.slug||""),G.dataset.trackSlug=e.slug||"",G.dataset.trackTitle=e.title,G.dataset.trackCategory=e.category||"Story";const ae=document.createElement("p");if(ae.className="quick-find__meta",ae.textContent=[e.category,H(e.ts)].filter(Boolean).join(" \u2022 "),U.appendChild(G),U.appendChild(ae),B.appendChild(U),s){const X=document.createElement("button");X.type="button",X.className="quick-find__action",X.dataset.quickFindAction="save",X.dataset.storyId=e.id||"",X.dataset.storyHref=e.href||"",X.textContent=O?"Saved":"Save",X.setAttribute("aria-pressed",O?"true":"false"),B.appendChild(X)}else if(k){const X=document.createElement("button");X.type="button",X.className="quick-find__action",X.dataset.quickFindAction="remove",X.dataset.storyId=e.id||"",X.dataset.storyHref=e.href||"",X.textContent="Remove",B.appendChild(X)}return B}function H(e){if(!e)return"";const s=Date.now()-e,O=60*1e3,k=60*O,B=24*k;try{const U=new Intl.RelativeTimeFormat("en",{numeric:"auto"});return s<O?"Just now":s<k?U.format(-Math.round(s/O),"minute"):s<B?U.format(-Math.round(s/k),"hour"):U.format(-Math.round(s/B),"day")}catch(U){return new Date(e).toLocaleString()}}function Y(e){const s=document.getElementById("latest-heading");s&&s.scrollIntoView({behavior:window.MIROZA.utils.prefersReducedMotion()?"auto":"smooth",block:"start"}),typeof e=="function"&&window.setTimeout(e,300)}return{init:n,open:z,close:m,setCategories:y}})(),window.MIROZA.homeFeed=(function(){const l={perCategory:8,pageSize:8,displayLimit:24,immediateCount:3};let u={...l},i=null,t=null,f=null,I=null,h=[],g=[],w=0,n="all",y={};function T(E={}){var F,P;document.body.dataset.page==="home"&&(u={...l,...E},i=document.querySelector("[data-home-feed]")||document.getElementById("latest-cards"),i&&(i.dataset.homeFeedManaged="true",t=document.querySelector("[data-home-feed-pagination]")||document.getElementById("latest-pagination"),(P=(F=window.MIROZA.filters)==null?void 0:F.initLatest)==null||P.call(F,{onChange:_}),$(!0),Promise.all([window.MIROZA.posts.ready(),window.MIROZA.blogs.ready()]).then(S).catch(J=>{console.error("MIROZA: Home feed failed to load",J),Z("We hit a snag loading stories. Visit the category pages instead.")})))}function _(E){const F=E||"all";F!==n&&(n=F,p())}function S(){const E=window.MIROZA.posts.byType?window.MIROZA.posts.byType("news"):[],F=window.MIROZA.posts.byType?window.MIROZA.posts.byType("article"):[],P=window.MIROZA.blogs.all?window.MIROZA.blogs.all():[];y={sourceCounts:{news:E.length,articles:F.length,blogs:P.length}};const J=b({news:E,articles:F,blogs:P});h=J.feed,y.selected=J.selectedCounts;const V=window.MIROZA.feedTools.getAudit();y.filesRead=V.filesRead,y.htmlFallbacks=V.htmlFallbacks,y.totalRendered=h.length,Q(),n="all",p()}function b(E){const F={news:0,articles:0,blogs:0},P=["news","articles","blogs"].map(V=>{const ie=r(E[V]||[]).slice().sort((ne,re)=>j(re)-j(ne)).slice(0,u.perCategory).map(o);return window.MIROZA.utils.shuffle(ie),F[V]=ie.length,{type:V,items:ie}});return{feed:v(P),selectedCounts:F}}function r(E){const F=new Map;return E.forEach(P=>{const J=W(P);if(!J)return;const V=F.get(J),ee=A(P),te=j(P);(!V||ee>V.score||ee===V.score&&te>V.dateValue)&&F.set(J,{item:P,score:ee,dateValue:te})}),Array.from(F.values()).map(P=>P.item)}function A(E){return(E==null?void 0:E.__source)==="json"?2:1}function v(E){const F=E.map(V=>V.items.slice()),P=[],J=new Map;for(;P.length<u.displayLimit;){let V=!1;for(const ee of F){const te=ee.shift();if(!te)continue;const ie=W(te),ne=j(te);if(ie){const re=J.get(ie);if(re&&re.dateValue>=ne)continue;J.set(ie,{dateValue:ne})}if(P.push(te),V=!0,P.length>=u.displayLimit)break}if(!V)break}return P}function o(E){const F=M(E.link||E.url||(E.slug?`/articles/${E.slug}.html`:"#")),P=E.image&&typeof E.image=="object"?E.image:typeof E.image=="string"&&E.image?{src:E.image,alt:E.title,sizes:"(max-width: 600px) 100vw, (max-width: 1200px) 50vw, 400px"}:oe;return{...E,link:F,image:P,metaLabel:d(E),contentType:E.contentType||K(E.category)}}function d(E){const F=c(E.date||E.updated);return[E.author||"MIROZA Desk",F].filter(Boolean).join(" \u2022 ")}function c(E){if(!E)return"";try{return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(new Date(E))}catch(F){return E}}function M(E){if(!E)return"#";try{const F=new URL(E,window.location.origin);return F.pathname+F.search}catch(F){return E}}function p(){if(!h.length){Z("Stories are publishing soon. Browse Articles or News while we refresh data.");return}if(g=L(h,n),w=0,i.innerHTML="",$(!1),!g.length){Z("No stories match this filter yet. Try switching categories.");return}const E=u.immediateCount?Math.min(u.immediateCount,g.length):0;E&&C(0,E),z(),w<g.length?m():D()}function L(E,F){if(!F||F==="all")return E.slice();const P=K(F);return E.filter(J=>{const V=K(J.category),ee=K(J.contentType);return P==="news"||P==="article"||P==="blog"?P===ee||P===V:V===P})}function z(){t&&(t.innerHTML="",f=document.createElement("button"),f.type="button",f.className="load-more-btn",f.addEventListener("click",()=>m()),t.appendChild(f),I==null||I.disconnect(),"IntersectionObserver"in window&&(I=new IntersectionObserver(E=>{E.forEach(F=>{F.isIntersecting&&!f.disabled&&m()})},{rootMargin:"200px 0px"}),I.observe(f)),D())}function m(){if(w>=g.length){D();return}const E=Math.min(g.length,w+u.pageSize);C(w,E),D()}function C(E,F){g.slice(E,F).forEach((P,J)=>{const V=window.MIROZA.buildCard(P,{order:E+J});V&&i.appendChild(V)}),w=F}function Z(E){$(!1),i.innerHTML="";const F=document.createElement("p");F.className="card-excerpt",F.textContent=E;const P=document.createElement("a");P.href="/articles.html",P.textContent="Browse all articles \u2192",P.className="text-link",P.setAttribute("data-prefetch",""),i.appendChild(F),i.appendChild(P),t&&(t.innerHTML="")}function D(){if(!f)return;const E=w<g.length;f.disabled=!E,f.textContent=E?"Load more stories":"All stories loaded"}function $(E){i==null||i.classList.toggle("is-loading",!!E)}function j(E){return(E==null?void 0:E.dateValue)||Date.parse((E==null?void 0:E.date)||(E==null?void 0:E.updated)||0)||0}function W(E){if(!E)return"";const F=E.slug||E.id;return F?F.toString().toLowerCase():(E.link||E.url||E.title||"").toLowerCase()}function K(E){return(E||"").toString().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function Q(){y&&(console.groupCollapsed("[MIROZA] Home feed audit"),console.log("Files read",y.filesRead||[]),console.log("Source counts",y.sourceCounts),console.log("Selected per category",y.selected),console.log("Fallback HTML usage",y.htmlFallbacks||[]),console.log("Feed items prepared",y.totalRendered),console.groupEnd())}return{init:T}})(),window.MIROZA.analytics=(function(){const l={enabled:!1,plausibleDomain:"",debug:!1};let u={...l},i=!1;function t(){const w=window.MIROZA.analyticsConfig||{};u={...l,...w}}function f(){if(i||!u.plausibleDomain)return;if(document.querySelector('script[data-analytics="plausible"]')){i=!0;return}const n=document.createElement("script");n.src="https://plausible.io/js/plausible.js",n.defer=!0,n.dataset.domain=u.plausibleDomain,n.dataset.analytics="plausible",n.addEventListener("load",()=>{i=!0,u.debug&&console.info("[MIROZA]","Plausible analytics loaded")}),document.head.appendChild(n)}function I(...w){u.debug&&console.info("[MIROZA]",...w)}function h(){var w;if(u.debug){if(I("Debug diagnostics enabled"),window.addEventListener("load",()=>{var y,T,_;const n=(_=(T=(y=window.performance)==null?void 0:y.getEntriesByType)==null?void 0:T.call(y,"navigation"))==null?void 0:_[0];n&&I("Navigation timing (ms)",{domContentLoaded:Math.round(n.domContentLoadedEventEnd),total:Math.round(n.duration)})},{once:!0}),"PerformanceObserver"in window)try{new PerformanceObserver(y=>{y.getEntries().forEach(T=>I("Paint metric",T.name,Math.round(T.startTime)+"ms"))}).observe({type:"paint",buffered:!0})}catch(n){I("Paint observer unavailable",n.message)}(w=window.MIROZA.posts)!=null&&w.ready&&window.MIROZA.posts.ready().then(n=>{I("Posts available",n.length)}).catch(n=>console.warn("MIROZA diagnostics unable to read posts",n))}}function g(){t(),u.enabled&&f(),h()}return{init:g,config:()=>({...u})}})(),window.MIROZA.vitals=(function(){const l={},u="miroza_vitals_snapshot";function i(){"PerformanceObserver"in window&&(t("largest-contentful-paint",h=>f("lcp",h.renderTime||h.loadTime||h.startTime)),t("first-input",h=>f("fid",h.processingStart-h.startTime)),t("layout-shift",h=>{h.hadRecentInput||f("cls",(l.cls||0)+h.value)}))}function t(h,g){try{const w=new PerformanceObserver(y=>{y.getEntries().forEach(T=>g(T))}),n=h==="layout-shift"?{type:h,buffered:!0}:{type:h,buffered:!0};w.observe(n)}catch(w){}}function f(h,g){var w,n;typeof g!="number"||!isFinite(g)||(l[h]=g,I(),(n=(w=window.MIROZA.analytics)==null?void 0:w.config)!=null&&n.call(w).debug&&console.info("[MIROZA][Vitals]",h,g))}function I(){try{localStorage.setItem(u,JSON.stringify(l))}catch(h){}}return{init:i,get:()=>({...l})}})(),window.MIROZA.a11y=(function(){function l(){const t=window.MIROZA.utils.qs(".skip-link");t&&t.addEventListener("click",()=>{var f;(f=window.MIROZA.utils.qs("#main"))==null||f.focus()})}function u(){document.addEventListener("keydown",t=>{if(t.key==="Escape"){const f=window.MIROZA.utils.qs(".main-nav");f&&f.classList.contains("open")&&window.MIROZA.nav.toggle()}})}function i(){l(),u()}return{init:i}})(),window.MIROZA.pwa=(function(){function l(){"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").catch(u=>console.warn("SW registration failed",u))}return{register:l}})(),document.addEventListener("DOMContentLoaded",function(){window.MIROZA.shell.init(),window.MIROZA.components.init(),window.MIROZA.analytics.init(),window.MIROZA.theme.init(),window.MIROZA.nav.init(),window.MIROZA.posts.init(),window.MIROZA.blogs.init(),window.MIROZA.homeFeed.init(),window.MIROZA.categories.init(),window.MIROZA.indiaNews.init(),window.MIROZA.prefetch.init(),window.MIROZA.forms.init(),window.MIROZA.community.init(),window.MIROZA.search.init(),window.MIROZA.quickFind.init(),window.MIROZA.ui.init(),window.MIROZA.a11y.init(),window.MIROZA.vitals.init(),window.MIROZA.pwa.register(),window.MIROZA.breadcrumbs.init(),window.MIROZA.seo.init(),we();const l=window.MIROZA.utils.qs(".theme-toggle");l&&l.addEventListener("click",window.MIROZA.theme.toggle);const u=window.MIROZA.utils.qs("#year");u&&(u.textContent=new Date().getFullYear())})})();
