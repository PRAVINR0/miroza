(function(){"use strict";const he="miroza_theme",de="https://miroza.online";function ge(){try{const c=localStorage.getItem(he);return c==="dark"||c==="light"?c:null}catch(c){return null}}(function(){const d=ge();if(d&&document.documentElement.dataset.theme!==d){document.documentElement.dataset.theme=d;return}!d&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(document.documentElement.dataset.theme="dark")})();const pe={world:"World",science:"Science",health:"Health",space:"Space",economy:"Economy",technology:"Technology",weather:"Weather",business:"Business",finance:"Finance",education:"Education",climate:"Climate",travel:"Travel",culture:"Culture",analysis:"Analysis",ideas:"Ideas",lifestyle:"Lifestyle",automobiles:"Automobiles",career:"Career",energy:"Energy",security:"Security"},fe={news:"/news.html","india-news":"/news.html",india:"/news.html",blog:"/blog.html",article:"/articles.html",articles:"/articles.html",story:"/articles.html",posts:"/articles.html"};Object.entries(pe).forEach(([c,d])=>{fe[c]||(fe[c]=`/articles.html?topic=${encodeURIComponent(d)}`)});function ue(c){return(c||"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function me(c){const d=ue(c);return fe[d]||null}function we(){var d;if(!((d=window.MIROZA)!=null&&d.utils))return;const c=new Set(["/news/index.html","news/index.html"]);window.MIROZA.utils.qsa("a[href]").forEach(n=>{const t=n.getAttribute("href")||"";if(c.has(t)){n.setAttribute("href","/news.html"),n.dataset.prefetch=n.dataset.prefetch||"";return}}),window.MIROZA.utils.qsa('a[href^="/category/"]').forEach(n=>{const t=n.getAttribute("href")||"",f=ue(t.replace("/category/","").replace(/\.html?$/,"")),M=me(f);M&&(n.setAttribute("href",M),n.dataset.prefetch=n.dataset.prefetch||"")})}document.documentElement.classList.add("js-ready"),window.MIROZA=window.MIROZA||{},window.MIROZA.utils={qs:(c,d=document)=>d.querySelector(c),qsa:(c,d=document)=>Array.from(d.querySelectorAll(c)),shuffle(c){for(let d=c.length-1;d>0;d--){const n=Math.floor(Math.random()*(d+1));[c[d],c[n]]=[c[n],c[d]]}return c},safeHTML(c){if(window.DOMPurify)return DOMPurify.sanitize(c,{USE_PROFILES:{html:!0}});const d=document.createElement("div");return d.textContent=c,d.innerHTML},prefersReducedMotion(){return window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches},formatNumber(c){try{return Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:1}).format(c||0)}catch(d){return c||0}},isInternalLink(c){try{return new URL(c,window.location.origin).origin===window.location.origin}catch(d){return!1}}},window.MIROZA.feedTools=(function(){const c={filesRead:new Set,htmlFallbacks:[],parsedPages:[]},d="/sitemap.xml",n=25,t="(max-width: 600px) 100vw, (max-width: 1200px) 50vw, 400px";function f(a){a&&c.filesRead.add(a)}function M(a){return fetch(a).then(O=>{if(!O.ok)throw new Error(`${a} responded with ${O.status}`);return O.json()}).then(O=>{const k=Array.isArray(O)?O:[];if(f(a),!k.length)throw new Error(`${a} returned no entries`);return k.forEach(i=>{i&&typeof i=="object"&&!i.__source&&(i.__source="json")}),k})}function h(a,O=n){return c.htmlFallbacks.push(a),fetch(d).then(k=>{if(!k.ok)throw new Error("Missing sitemap");return f(d),k.text()}).then(k=>g(k,a,O)).catch(k=>(console.warn("MIROZA: Unable to scan fallback HTML for",a,k),[]))}function g(a,O,k){try{const i=new DOMParser().parseFromString(a,"application/xml"),u=Array.from(i.querySelectorAll("url > loc")).map(w=>w.textContent.trim()).filter(Boolean),l=O==="news"?"/news/":O==="blogs"?"/blogs/":"/articles/",y=u.filter(w=>w.includes(l)).slice(0,k);return Promise.all(y.map(w=>p(w,O))).then(w=>w.filter(Boolean))}catch(i){return console.warn("MIROZA: Unable to parse sitemap XML",i),[]}}function p(a,O){return fetch(a).then(k=>{if(!k.ok)throw new Error(`Status ${k.status}`);return k.text()}).then(k=>{c.parsedPages.push(a);const i=r(k,a,O);return b(i,O)}).catch(k=>(console.warn("MIROZA: Unable to parse fallback page",a,k),null))}function r(a,O,k){var i,u,l;try{const y=new DOMParser().parseFromString(a,"text/html"),w=W=>{var V,X;return((X=(V=y.querySelector(W))==null?void 0:V.getAttribute("content"))==null?void 0:X.trim())||""},L=w('meta[property="og:title"]')||w('meta[name="title"]')||((u=(i=y.querySelector("title"))==null?void 0:i.textContent)==null?void 0:u.trim())||"Untitled",z=w('meta[property="og:description"]')||w('meta[name="description"]')||"",m=w('meta[name="author"]')||w('meta[property="article:author"]'),S=w('meta[property="article:published_time"]')||w('meta[name="date"]')||w('meta[itemprop="datePublished"]'),x=w('meta[property="article:section"]')||w('meta[name="category"]'),P=w('meta[property="og:image"]')||w('meta[name="image"]'),$=((l=y.querySelector('link[rel="canonical"]'))==null?void 0:l.getAttribute("href"))||O;return{title:L,description:z,author:m,date:S,category:x,image:P,link:$,type:k}}catch(y){return console.warn("MIROZA: Fallback meta parse failed for",O,y),null}}function b(a,O){if(!a)return null;const k=C(a.link),i=_(k),u=a.category||v(O),l=a.date&&!Number.isNaN(Date.parse(a.date))?new Date(a.date).toISOString():new Date().toISOString(),y=a.image?{src:a.image,srcset:`${a.image} 800w`,sizes:t,alt:a.title}:null;return{id:i||k,slug:i,title:a.title,excerpt:a.description,author:a.author||"MIROZA Desk",category:u,date:l,image:y,link:k,contentType:O==="blogs"?"blog":O==="news"?"news":"article",__source:"html"}}function C(a){if(!a)return"#";try{const O=new URL(a,window.location.origin);return O.pathname+O.search}catch(O){return a}}function _(a){if(!a)return"";try{const O=new URL(a,window.location.origin);return ue(O.pathname.split("/").filter(Boolean).pop())}catch(O){return ue(a.split("/").filter(Boolean).pop())}}function v(a){return a==="news"?"India":a==="blogs"||a==="blog"?"Blog":"World"}function A(){return{filesRead:Array.from(c.filesRead),htmlFallbacks:c.htmlFallbacks.slice(),parsedPages:c.parsedPages.slice()}}return{fetchJsonArray:M,scanType:h,parseHtmlMeta:r,getAudit:A}})(),window.MIROZA.shell=(function(){const c=[{label:"Home",href:"/",match:["/"]},{label:"News",href:"/news.html",startsWith:["/news"]},{label:"Articles",href:"/articles.html",startsWith:["/articles"]},{label:"Blogs",href:"/blog.html",startsWith:["/blog","/blogs"]},{label:"About",href:"/#about",hash:"#about",homeOnly:!0},{label:"Contact",href:"/#contact",hash:"#contact",homeOnly:!0}];function d(){n()}function n(){const g=window.MIROZA.utils.qs(".main-nav");if(!g)return;let p=g.querySelector("ul");p||(p=document.createElement("ul"),g.appendChild(p)),p.innerHTML="",c.forEach(r=>{const b=document.createElement("li"),C=document.createElement("a");C.href=r.href,C.textContent=r.label,C.setAttribute("data-prefetch",""),t(r)&&C.setAttribute("aria-current","page"),b.appendChild(C),p.appendChild(b)}),g.dataset.shellReady="true"}function t(g){const p=h(window.location.pathname);return g.startsWith&&f(p,g.startsWith)||g.match&&M(p,g.match)?!0:g.hash?g.homeOnly?p==="/"&&window.location.hash===g.hash:window.location.hash===g.hash:g.href==="/"&&p==="/"&&!window.location.hash}function f(g,p){return(Array.isArray(p)?p:[p]).some(b=>g.startsWith(b))}function M(g,p){return(Array.isArray(p)?p:[p]).includes(g)}function h(g){if(!g)return"/";const p=g.replace(/\\/g,"/").replace(/\/index\.html$/i,"/");return p===""?"/":p}return{init:d,enhanceNav:n}})(),window.MIROZA.components=(function(){const c=[{title:"MIROZA",body:["Modern news & articles hub focused on trustworthy analysis and zero-noise delivery.","Updated daily with world, economy, and culture briefings."]},{title:"Coverage",links:[{label:"News",href:"/news.html"},{label:"Blog",href:"/blog.html"},{label:"Articles",href:"/articles.html"},{label:"Privacy Memo",href:"/privacy.html"}]},{title:"Resources",links:[{label:"Security Checklist",href:"/security.html"},{label:"RSS Feed",href:"/rss.xml"},{label:"Sitemap",href:"/sitemap.xml"},{label:"Offline Brief",href:"/offline.html"}]},{title:"Connect",links:[{label:"contact@miroza.online",href:"mailto:contact@miroza.online"},{label:"LinkedIn",href:"https://linkedin.com",external:!0},{label:"Twitter",href:"https://twitter.com",external:!0}]}];function d(){n()}function n(){const f=window.MIROZA.utils.qs(".site-footer");if(!f||f.dataset.componentReady==="true")return;const M=f.querySelector(".footer-grid");M&&(M.innerHTML="",c.forEach(h=>M.appendChild(t(h))),f.dataset.componentReady="true")}function t(f){const M=document.createElement("div"),h=document.createElement("h3");if(h.textContent=f.title,M.appendChild(h),Array.isArray(f.body)&&f.body.forEach(g=>{const p=document.createElement("p");p.textContent=g,M.appendChild(p)}),Array.isArray(f.links)){const g=document.createElement("ul");f.links.forEach(p=>{const r=document.createElement("li"),b=document.createElement("a");b.href=p.href,b.textContent=p.label,b.setAttribute("data-prefetch",""),p.external&&(b.target="_blank",b.rel="noopener noreferrer"),r.appendChild(b),g.appendChild(r)}),M.appendChild(g)}return M}return{init:d,enhanceFooter:n}})();const le="(max-width: 600px) 100vw, (max-width: 1200px) 50vw, 400px",ie={src:"/assets/images/hero-insight-800.svg",srcset:"/assets/images/hero-insight-400.svg 400w, /assets/images/hero-insight-800.svg 800w, /assets/images/hero-insight-1200.svg 1200w",sizes:le,alt:"MIROZA featured story"};function ye(c,d={}){var A,a,O,k;if(!c||typeof c!="object")return null;const n=document.createElement("article");n.className="card fade-in",n.setAttribute("data-id",c.id),n.dataset.label=c.category||"Story",((a=(A=window.MIROZA.posts)==null?void 0:A.isTrending)==null?void 0:a.call(A,c.id))?n.dataset.trending="true":n.removeAttribute("data-trending"),typeof d.order=="number"&&n.style.setProperty("--card-order",d.order);const f=c.image||ie,M=document.createElement("picture");Array.isArray(f.sources)&&f.sources.forEach(i=>{const u=document.createElement("source");Object.entries(i||{}).forEach(([l,y])=>{y&&u.setAttribute(l,y)}),M.appendChild(u)});const h=document.createElement("img");h.loading="lazy",h.decoding="async",h.src=f.src||ie.src,f.srcset&&h.setAttribute("srcset",f.srcset),h.setAttribute("sizes",f.sizes||le),h.alt=f.alt||c.title,h.width=400,h.height=225,M.appendChild(h),n.appendChild(M);const g=document.createElement("div");g.className="card-content";const p=document.createElement("h3");p.className="card-title",p.innerHTML=window.MIROZA.utils.safeHTML(c.title);const r=document.createElement("p");r.className="card-meta";const b=window.MIROZA.utils.formatNumber(c.views||0),C=c.metaLabel||`${c.category||"Story"} \u2022 ${b} views`;r.textContent=C;const _=document.createElement("p");_.className="card-excerpt",_.innerHTML=window.MIROZA.utils.safeHTML(c.excerpt);const v=document.createElement("a");return v.href=c.link||"/articles/"+c.slug+".html",v.textContent="Read More \u2192",v.className="read-more",v.setAttribute("data-prefetch",""),v.setAttribute("data-transition",""),v.dataset.trackStory=(k=(O=c.id)!=null?O:c.slug)!=null?k:"",v.dataset.trackSlug=c.slug||"",v.dataset.trackTitle=c.title,v.dataset.trackCategory=c.category||"Story",g.appendChild(p),g.appendChild(r),g.appendChild(_),g.appendChild(v),n.appendChild(g),n}window.MIROZA.buildCard=ye,window.MIROZA.hero=(function(){const n=["Climate finance, corridors, and civic infrastructure.","Ports, policy, and the people connecting them.","Signals our partners brief boards with before dawn.","Emerging market pilots, resilience, and governance."];let t=[],f=0,M=null,h=0,g=null,p=!1;const r={tag:null,title:null,excerpt:null,link:null,picture:null,image:null,advance:null,tagline:null};function b(){r.tag=window.MIROZA.utils.qs("#hero-tag"),r.title=window.MIROZA.utils.qs("[data-hero-title]"),r.excerpt=window.MIROZA.utils.qs("[data-hero-excerpt]"),r.link=window.MIROZA.utils.qs("#hero-link"),r.picture=window.MIROZA.utils.qs("#hero-picture"),r.image=window.MIROZA.utils.qs("#hero-image"),r.advance=window.MIROZA.utils.qs(".hero-advance"),r.tagline=window.MIROZA.utils.qs("[data-hero-tagline]")}function C(){var L;p||(p=!0,(L=r.advance)==null||L.addEventListener("click",()=>l(!0)))}function _(){M&&(window.clearInterval(M),M=null)}function v(){t.length<=1||window.MIROZA.utils.prefersReducedMotion()||(_(),M=window.setInterval(()=>l(!1),12e3))}function A(){if(!r.tagline||n.length<2){n.length===1&&u(n[0]);return}a(),u(n[h]),!window.MIROZA.utils.prefersReducedMotion()&&(g=window.setInterval(()=>O(),9e3))}function a(){g&&(window.clearInterval(g),g=null)}function O(){h=(h+1)%n.length,u(n[h])}function k(L){return L.link||(L.slug?`/articles/${L.slug}.html`:"#")}function i(L){var S,x;if(!L)return;const z=window.MIROZA.utils.safeHTML;r.tag&&(r.tag.textContent=L.category||"Featured Story"),r.title&&(r.title.innerHTML=z(L.title)),r.excerpt&&(r.excerpt.innerHTML=z(L.excerpt)),r.link&&(r.link.href=k(L),r.link.setAttribute("data-prefetch",""),r.link.dataset.trackStory=(x=(S=L.id)!=null?S:L.slug)!=null?x:"hero",r.link.dataset.trackSlug=L.slug||"",r.link.dataset.trackTitle=L.title,r.link.dataset.trackCategory=L.category||"Story");const m=L.image||ie;r.image&&(r.image.src=m.src||ie.src,m.srcset&&(r.image.srcset=m.srcset),r.image.sizes=m.sizes||le,r.image.alt=m.alt||L.title),r.picture&&(r.picture.dataset.storyId=L.id)}function u(L){!r.tagline||!L||(r.tagline.textContent=L)}function l(L=!1){t.length&&(f=(f+1)%t.length,i(t[f]),L&&v())}function y(L=[]){b(),t=L.filter(Boolean),f=0,t.length&&(i(t[0]),C(),v(),A())}function w(L=[]){if(t=L.filter(Boolean),f=0,!t.length){_(),a();return}i(t[0]),v(),A()}return{mount:y,setItems:w,next:()=>l(!0)}})(),window.MIROZA.theme=(function(){const c=he;function d(){return document.documentElement.dataset.theme||"light"}function n(h,{persist:g=!0}={}){const p=h==="dark"?"dark":"light";if(document.documentElement.dataset.theme=p,g)try{localStorage.setItem(c,p)}catch(r){}f()}function t(){n(d()==="light"?"dark":"light")}function f(){const h=window.MIROZA.utils.qs(".theme-toggle img");if(!h)return;const g=d()==="light";h.src=g?"/assets/icons/moon.svg":"/assets/icons/sun.svg",h.alt=g?"Enable dark mode":"Enable light mode"}function M(){const h=ge();h&&h!==d()&&(document.documentElement.dataset.theme=h),f()}return{init:M,toggle:t,set:n}})(),window.MIROZA.nav=(function(){let c=!1,d,n;function t(){c?(d.classList.add("open"),n.setAttribute("aria-expanded","true"),n.innerHTML='<img src="/assets/icons/close.svg" alt="Close" width="24" height="24" />'):(d.classList.remove("open"),n.setAttribute("aria-expanded","false"),n.innerHTML='<img src="/assets/icons/menu.svg" alt="Menu" width="24" height="24" />')}function f(){var h;c=!c,t(),c?(h=d.querySelector("a"))==null||h.focus():n.focus()}function M(){d=window.MIROZA.utils.qs(".main-nav"),n=window.MIROZA.utils.qs(".menu-toggle"),!(!d||!n)&&n.addEventListener("click",f)}return{init:M,toggle:f}})(),window.MIROZA.posts=(function(){const c="/data/articles.json",d="/data/posts.json",n="/data/news.json";let t=[],f=null,M=[],h=new Set,g=[];const p=new Map;function r(o){return(o||"").toLowerCase()}function b(o,E="article"){const Z=r(o);return Z?Z==="india-news"?"news":Z:E}function C(o){const E=r(o);return E==="news"||E==="india"}function _(o){return r(o)==="blog"}function v(o){const E=r(o);return E?E!=="news"&&E!=="blog":!1}function A(o,E,Z){if(!E)return"#";const q=b(o),D=r(Z);return q==="blog"||D==="blog"?`/blogs/${E}.html`:q==="news"||D==="news"||D==="india"?`/news/${E}.html`:`/articles/${E}.html`}function a(o,E){if(!o)return!1;const Z=r(E);return Z?b(o.contentType||o.category)===Z:!1}function O(o,E){return o?typeof o=="string"?{src:o,alt:E||"Story art",sizes:le}:{src:o.src||ie.src,srcset:o.srcset||ie.srcset,sizes:o.sizes||le,alt:o.alt||E||ie.alt,sources:Array.isArray(o.sources)?o.sources:void 0}:{...ie,alt:E||ie.alt}}function k(o){if(!o)return"";const E=new Date(o);if(Number.isNaN(E.getTime()))return"";try{return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(E)}catch(Z){return E.toISOString().slice(0,10)}}function i(o,E,Z="article"){const q=o.slug||`story-${o.id||E+1}`,D=o.category||"Story",H=r(D),Q=b(o.contentType||Z),e=Date.parse(o.date||o.updated||"")||Date.now()-E,s=o.link||o.contentFile||A(Q,q,D),R=o.metaLabel||[D,k(o.date)].filter(Boolean).join(" \u2022 "),T=o.excerpt||o.summary||"",B=O(o.image,o.title),U=H==="news"?1150-E*12:1600-E*20,Y=typeof o.views=="number"?o.views:U;return{...o,slug:q,category:D,link:s,dateValue:e,metaLabel:R,excerpt:T,image:B,views:Y,contentType:Q,__source:o.__source||"json"}}function u(o,E){if(!o)return null;const Z=o.slug||`news-${E+1}`,q=o.category||"News",D=i({...o,id:o.id||`news-${E+1}`,slug:Z,category:q,contentFile:o.contentFile},E+1e3,"news"),H=k(D.date),Q=[q,H].filter(Boolean);return D.metaLabel=Q.join(" \u2022 ")||q,D.views=D.views||1200-E*15,D.region=q,D}function l(){return window.MIROZA.feedTools.fetchJsonArray(c).catch(o=>(console.warn("MIROZA: Falling back to legacy posts feed",o),window.MIROZA.feedTools.fetchJsonArray(d))).catch(()=>window.MIROZA.feedTools.scanType("articles")).catch(o=>(console.error("MIROZA: Unable to load article feed",o),[]))}function y(){return window.MIROZA.feedTools.fetchJsonArray(n).catch(()=>window.MIROZA.feedTools.scanType("news")).catch(o=>(console.error("MIROZA: Unable to load news feed",o),[]))}function w(o){return Array.isArray(o)?o:[]}function L(){return Promise.all([l(),y()]).then(([o,E])=>{const Z=w(o).map((D,H)=>i(D,H,"article")).filter(D=>!_(D.category)).sort((D,H)=>(H.dateValue||0)-(D.dateValue||0)),q=w(E).map((D,H)=>u(D,H)).filter(Boolean).sort((D,H)=>(H.dateValue||0)-(D.dateValue||0));return z(E),t=[...q,...Z],m(),t}).catch(o=>(console.error("Posts load failed",o),t=[],m(),t))}function z(o){var E,Z;if((Z=(E=window.MIROZA)==null?void 0:E.indiaNews)!=null&&Z.prime&&Array.isArray(o)&&o.length)try{window.MIROZA.indiaNews.prime(o)}catch(q){console.warn("MIROZA: Unable to seed India desk from posts module",q)}}function m(){p.clear(),t.forEach(Z=>{var D,H,Q;const q=((Q=(H=(D=Z.id)!=null?D:Z.slug)!=null?H:Z.link)!=null?Q:Math.random()).toString();p.set(q,Z)}),M=t.filter(Z=>a(Z,"article")).slice().sort((Z,q)=>(q.dateValue||0)-(Z.dateValue||0)),g=t.slice().sort((Z,q)=>(q.views||0)-(Z.views||0)).slice(0,8),h=new Set(g.map(Z=>Z.id))}function S(o){const E=r(o);return E==="news"?re():E==="article"?ae():t.filter(Z=>r(Z.category)===E).sort((Z,q)=>(q.dateValue||0)-(Z.dateValue||0))}function x(o){if(!Array.isArray(o)||!o.length)return t.slice();const E=o.map(D=>r(D)),Z=E.includes("article"),q=E.includes("news");return t.filter(D=>{const H=r(D.category);return Z&&a(D,"article")||q&&a(D,"news")?!0:E.includes(H)}).sort((D,H)=>(H.dateValue||0)-(D.dateValue||0))}function P(o){return o?o.split(",").map(E=>r(E)).filter(Boolean):[]}function $(o){var Z,q;const E=((q=(Z=window.MIROZA.utils)==null?void 0:Z.qsa)==null?void 0:q.call(Z,".chip"))||[];E.length&&E.forEach(D=>{let H="";try{const e=new URL(D.href,window.location.origin).searchParams.get("topic");H=r(e||D.textContent||""),e?D.setAttribute("aria-current",H&&H===o?"page":"false"):D.setAttribute("aria-current",o?"false":"page")}catch(Q){D.setAttribute("aria-current",o?"false":"page")}})}function W(o){var Z,q,D;const E=(q=(Z=window.MIROZA.utils)==null?void 0:Z.qs)==null?void 0:q.call(Z,"[data-category-label]");E&&(E.dataset.defaultTitle||(E.dataset.defaultTitle=((D=E.textContent)==null?void 0:D.trim())||""),o?E.textContent=`${o} Briefings`:E.dataset.defaultTitle&&(E.textContent=E.dataset.defaultTitle))}function V(){return g.slice(0,5)}function X(o){return h.has(o)}function J(){const o=window.MIROZA.utils.qs("#trending-list");o&&(o.innerHTML="",V().forEach(E=>{const Z=document.createElement("li"),q=document.createElement("a");q.href=E.link||"/articles/"+E.slug+".html",q.textContent=E.title,q.setAttribute("data-prefetch",""),q.setAttribute("data-transition","");const D=document.createElement("span");D.className="card-meta",D.textContent=E.metaLabel||window.MIROZA.utils.formatNumber(E.views||0)+" views",Z.appendChild(q),Z.appendChild(D),o.appendChild(Z)}))}function re(){return t.filter(o=>a(o,"news")).sort((o,E)=>(E.dateValue||0)-(o.dateValue||0))}function ae(){return t.filter(o=>a(o,"article")).sort((o,E)=>(E.dateValue||0)-(o.dateValue||0))}function ce(){var E,Z,q;const o=(Z=(E=window.MIROZA.utils)==null?void 0:E.qs)==null?void 0:Z.call(E,"[data-home-feed]");return!!((q=o==null?void 0:o.dataset)!=null&&q.homeFeedManaged)}function I(){var o,E,Z,q,D;try{if(!ce()){let R=function(U){Array.isArray(U)&&(e=U.map(Y=>({...Y}))),s=[...Q,...e].sort((Y,se)=>{const te=Y.dateValue||Date.parse(Y.date||0)||0;return(se.dateValue||Date.parse(se.date||0)||0)-te})};const Q=[...t];let e=[],s=[];R();let T="all";const B=window.MIROZA.pagination.mount({targetSelector:"#latest-cards",controlsSelector:"#latest-pagination",getData:()=>N(s,T),pageSize:8,emptyMessage:"Fresh stories are on the way.",mode:"load-more",autoLoad:!0});(o=window.MIROZA.filters)==null||o.initLatest({onChange:U=>{T=U,B==null||B.render()}}),(E=window.MIROZA.blogs)!=null&&E.ready&&window.MIROZA.blogs.ready().then(()=>{const U=window.MIROZA.blogs.all?window.MIROZA.blogs.all():window.MIROZA.blogs.latest(20);R(U),B==null||B.render({reset:!0})}).catch(()=>{})}window.MIROZA.pagination.mount({targetSelector:"#news-cards",controlsSelector:"#news-pagination",getData:()=>re(),pageSize:6,emptyMessage:"News stories publishing soon.",mode:"load-more"}),window.MIROZA.pagination.mount({targetSelector:"#articles-cards",controlsSelector:"#articles-pagination",getData:()=>ae(),pageSize:6,emptyMessage:"Long-form stories publishing soon.",mode:"load-more"}),J();const H=M.slice(0,5);(Z=window.MIROZA.hero)==null||Z.mount(H),(D=(q=window.MIROZA.ui)==null?void 0:q.hydrateLazySections)==null||D.call(q),console.info("[MIROZA] Home sections rendered",{totalPosts:t.length,latestRendered:latestOrder.length,heroStories:H.length})}catch(H){console.error("MIROZA: Failed to render home layout",H);const Q=document.getElementById("latest-cards");if(Q){Q.innerHTML="";const e=document.createElement("p");e.className="card-excerpt",e.textContent="We hit a snag while loading stories. Please refresh to try again.",Q.appendChild(e)}}}function N(o,E){if(E==="all")return o;const Z=r(E);return Z==="article"?o.filter(q=>a(q,"article")):Z==="news"?o.filter(q=>a(q,"news")):Z==="blog"?o.filter(q=>a(q,"blog")):o.filter(q=>r(q.category)===Z)}function F(){var R;const o=document.body.dataset.category;if(!o)return;if((o||"").toLowerCase()==="blog"){(R=window.MIROZA.blogs)==null||R.ready().then(()=>window.MIROZA.blogs.mountCategorySection()).catch(()=>{}),J();return}const Z=P(document.body.dataset.categories||""),q=typeof URLSearchParams!="undefined"?new URLSearchParams(window.location.search||""):null,D=(q==null?void 0:q.get("topic"))||"",H=r(D),Q=Z.length?x(Z):S(o),e=H?Q.filter(T=>r(T.category)===H):Q,s=H&&D?`${D} coverage is publishing soon.`:`${o} stories publishing soon.`;W(D),$(H),window.MIROZA.pagination.mount({targetSelector:"#category-list",controlsSelector:"#category-pagination",getData:()=>e,pageSize:10,emptyMessage:s,mode:"load-more",autoLoad:!0}),J()}function j(){const o=document.body.dataset.page;o==="home"&&I(),o==="category"&&F(),o||J()}function K(){return f?f.then(()=>j()):f=L().then(()=>(j(),t)),f}function G(){return f!=null?f:f=L()}function ee(){return M.slice(0,5)}function oe(o){return o?p.get(o.toString())||t.find(E=>(E.slug||"")===o):null}function ne(o){return t.filter(E=>a(E,o))}return{init:K,ready:G,posts:()=>t,filterByCategory:S,trending:V,isTrending:X,heroFeed:ee,byId:oe,byType:ne}})(),window.MIROZA.categories=(function(){const c="/data/categories.json";let d=[],n=null;function t(){f()&&M()}function f(){var i,u,l,y;return!!((u=(i=window.MIROZA.utils)==null?void 0:i.qs)!=null&&u.call(i,"[data-category-directory]"))||!!((y=(l=window.MIROZA.utils)==null?void 0:l.qs)!=null&&y.call(l,"[data-category-chips]"))}function M(){return n||(n=h()),n}function h(){return fetch(c).then(i=>{if(!i.ok)throw new Error(`Categories feed responded with ${i.status}`);return i.json()}).then(i=>(d=g(i),_(),v(),A(),d)).catch(i=>(console.warn("MIROZA: Unable to load categories feed",i),d=[],_(!0),d))}function g(i){return(Array.isArray(i)?i:[]).map(l=>{var x,P,$,W;const y=ue(l.slug||l.label||""),w=l.label||l.title||p(y),L=l.href||me(y)||r(w),z=typeof l.count=="number"?l.count:Array.isArray(l.items)?l.items.length:0,m=l.updated||l.latestDate||((P=(x=l.previews)==null?void 0:x[0])==null?void 0:P.date)||((W=($=l.items)==null?void 0:$[0])==null?void 0:W.date)||null,S=Array.isArray(l.previews)?l.previews.slice(0,4):Array.isArray(l.items)?l.items.slice(0,4):[];return{slug:y,label:w,href:L,count:z,updated:m,updatedLabel:b(m),description:l.description||C(w,z,m),previews:S.map(V=>({title:V.title,link:V.link||(V.slug?`/articles/${V.slug}.html`:L),date:V.date,category:V.category||w}))}}).filter(l=>l.slug&&l.href).sort((l,y)=>{const w=Date.parse(l.updated||0)||0;return(Date.parse(y.updated||0)||0)-w})}function p(i){return i?i.replace(/-/g," ").replace(/\b\w/g,u=>u.toUpperCase()):"Stories"}function r(i){return i?`/articles.html?topic=${encodeURIComponent(i)}`:"/articles.html"}function b(i){if(!i)return"recently";const u=new Date(i);if(Number.isNaN(u.getTime()))return i;try{return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(u)}catch(l){return u.toISOString().split("T")[0]}}function C(i,u,l){const y=b(l);return`${u>0?`${u} stories`:"Fresh coverage"} \u2022 Updated ${y}`}function _(i=!1){var l,y;const u=((y=(l=window.MIROZA.utils)==null?void 0:l.qsa)==null?void 0:y.call(l,"[data-category-directory]"))||[];u.length&&u.forEach(w=>{const L=parseInt(w.dataset.categoryLimit||"",10)||d.length||6,z=d.slice(0,L);if(w.innerHTML="",!z.length){i?w.appendChild(k("Category data unavailable right now.")):(w.appendChild(O()),w.appendChild(O()));return}z.forEach((m,S)=>w.appendChild(a(m,S)))})}function v(){var u,l;const i=((l=(u=window.MIROZA.utils)==null?void 0:u.qsa)==null?void 0:l.call(u,"[data-category-chips]"))||[];!i.length||!d.length||i.forEach(y=>{const w=parseInt(y.dataset.categoryLimit||"",10)||d.length||8;y.innerHTML="",d.slice(0,w).forEach(z=>{const m=document.createElement("a");m.className="chip",m.href=z.href,m.textContent=z.label,m.setAttribute("data-prefetch",""),y.appendChild(m)});const L=document.createElement("a");L.className="chip",L.href="/articles.html",L.textContent="Reset",L.setAttribute("data-prefetch",""),y.appendChild(L)})}function A(){var u,l;if(!d.length)return;const i=d.map(y=>({slug:y.slug,label:y.label,count:y.count,href:y.href}));(l=(u=window.MIROZA.quickFind)==null?void 0:u.setCategories)==null||l.call(u,i)}function a(i,u){const l=document.createElement("article");l.className="category-card fade-in",l.style.setProperty("--card-order",u);const y=document.createElement("p");y.className="hero-tag",y.textContent="Category";const w=document.createElement("h3");w.textContent=i.label;const L=document.createElement("p");L.className="category-card__meta",L.textContent=`${i.count} stories \u2022 Updated ${i.updatedLabel}`;const z=document.createElement("p");z.className="category-card__description",z.textContent=i.description;const m=document.createElement("ul");if(m.className="category-card__previews",i.previews.length)i.previews.forEach(x=>{const P=document.createElement("li"),$=document.createElement("a");$.href=x.link||i.href,$.textContent=x.title,$.setAttribute("data-prefetch",""),P.appendChild($),m.appendChild(P)});else{const x=document.createElement("li");x.textContent="Coverage refreshes shortly.",m.appendChild(x)}const S=document.createElement("a");return S.href=i.href,S.className="text-link",S.textContent="Open coverage \u2192",S.setAttribute("data-prefetch",""),l.appendChild(y),l.appendChild(w),l.appendChild(L),l.appendChild(z),l.appendChild(m),l.appendChild(S),l}function O(){const i=document.createElement("article");return i.className="category-card skeleton",i.setAttribute("aria-hidden","true"),i}function k(i){const u=document.createElement("p");return u.className="category-directory__empty",u.textContent=i,u}return{init:t,ready:M,list:()=>d.slice()}})(),window.MIROZA.blogs=(function(){const c="/data/blogs.json";let d=[],n=[],t=null;function f(){return window.MIROZA.feedTools.fetchJsonArray(c).catch(()=>window.MIROZA.feedTools.scanType("blogs")).then(v=>(d=Array.isArray(v)?v:[],n=d.map(M).sort((A,a)=>(a.dateValue||0)-(A.dateValue||0)),n)).catch(v=>(console.error("MIROZA: Failed to load blogs",v),d=[],n=[],[]))}function M(v){const A=v.url||v.canonical||`/blogs/${v.slug||"blog-"+v.id}.html`,a=Date.parse(v.date||v.displayDate||"")||0,O=[v.displayDate,v.readTimeMinutes?`${v.readTimeMinutes} min read`:null].filter(Boolean);return{id:v.slug||`blog-${v.id}`,slug:v.slug,title:v.title,excerpt:v.excerpt,category:"Blog",link:A,metaLabel:O.join(" \u2022 ")||"Blog insight",date:v.date,dateValue:a,tags:v.tags||[],views:v.readTimeMinutes?v.readTimeMinutes*100:void 0,contentType:"blog",__source:v.__source||"json"}}function h(v=8){return n.slice(0,v)}function g(){return n.slice()}function p(){window.MIROZA.pagination&&window.MIROZA.pagination.mount({targetSelector:"#blog-cards",controlsSelector:"#blog-pagination",getData:()=>n,pageSize:12,emptyMessage:"Blogs are publishing soon.",mode:"load-more",autoLoad:!0})}function r(){const v="#category-list",A="#category-pagination",a=window.MIROZA.utils.qs(v),O=window.MIROZA.utils.qs(A);if(!(!a||!O)){if(!n.length){a.innerHTML="";const k=document.createElement("p");k.className="card-excerpt",k.textContent="Blog posts are publishing soon.",a.appendChild(k),O.innerHTML="";return}window.MIROZA.pagination.mount({targetSelector:v,controlsSelector:A,getData:()=>n,pageSize:10,emptyMessage:"Blog posts are publishing soon.",mode:"load-more",autoLoad:!0})}}function b(){const v=document.body.dataset.page,A=(document.body.dataset.category||"").toLowerCase();v==="home"&&p(),v==="category"&&A==="blog"&&r()}function C(){return t||(t=f()),t.then(()=>b()),t}function _(){return t!=null?t:t=f()}return{init:C,ready:_,latest:h,all:g,renderHomeSection:p,mountCategorySection:r}})(),window.MIROZA.pagination=(function(){function c({targetSelector:d,controlsSelector:n,getData:t,pageSize:f=10,emptyMessage:M="More stories coming soon.",mode:h="paged",autoLoad:g=!1}){const p=window.MIROZA.utils.qs(d),r=window.MIROZA.utils.qs(n);if(!p||!r||typeof t!="function")return null;const b={page:0},C=h==="load-more";let _;function v(a){(typeof a=="boolean"?{reset:a}:a||{}).reset&&(b.page=0);const k=t()||[];if(!k.length){p.innerHTML="";const z=document.createElement("p");z.className="card-excerpt",z.textContent=M,p.appendChild(z),r.innerHTML="";return}const i=Math.max(1,Math.ceil(k.length/f));if(b.page=Math.min(b.page,i-1),C){A(k,i);return}const u=b.page*f,l=k.slice(u,u+f);p.innerHTML="",l.forEach((z,m)=>{const S=window.MIROZA.buildCard(z,{order:u+m});S&&p.appendChild(S)}),r.innerHTML="";const y=document.createElement("button");y.type="button",y.textContent="Previous",y.disabled=b.page===0,y.addEventListener("click",()=>{b.page>0&&(b.page--,v())});const w=document.createElement("span");w.className="page-indicator",w.textContent=`Page ${b.page+1} of ${i}`;const L=document.createElement("button");L.type="button",L.textContent="Next",L.disabled=b.page>=i-1,L.addEventListener("click",()=>{b.page<i-1&&(b.page++,v())}),r.appendChild(y),r.appendChild(w),r.appendChild(L)}v();function A(a,O){const k=Math.min((b.page+1)*f,a.length);p.innerHTML="",a.slice(0,k).forEach((l,y)=>{const w=window.MIROZA.buildCard(l,{order:y});w&&p.appendChild(w)}),r.innerHTML="";const i=document.createElement("button");i.type="button",i.className="load-more-btn";const u=b.page<O-1;i.textContent=u?"Load more stories":"All stories loaded",i.disabled=!u,i.addEventListener("click",()=>{b.page<O-1&&(b.page++,v())}),r.appendChild(i),g&&u&&"IntersectionObserver"in window&&(_==null||_.disconnect(),_=new IntersectionObserver(l=>{l.forEach(y=>{y.isIntersecting&&!i.disabled&&i.click()})},{rootMargin:"200px 0px"}),_.observe(i))}return{render:v}}return{mount:c}})(),window.MIROZA.indiaNews=(function(){const c="/data/news.json";let d=[],n=null,t=null;function f(A){const a=h(A);return a.length?(d=a,n=Promise.resolve(d),!0):!1}function M(){return fetch(c).then(A=>A.json()).then(A=>(f(A),d)).catch(A=>(console.error("MIROZA: Unable to load India news feed",A),d=[],d))}function h(A){return(Array.isArray(A)?A:[]).map((O,k)=>{const i=O.slug||`india-news-${k+1}`,u=O.date||"",l=g(u),y=O.category||"India",w=O.title||"India desk update";return{id:i,slug:i,title:w,excerpt:O.excerpt||"",category:y,date:u,metaLabel:l?`${y} \u2022 ${l}`:y,link:O.contentFile||`/news/${i}.html`,image:O.image?{src:O.image,alt:w,sizes:le}:ie}}).sort((O,k)=>{const i=new Date(O.date||0).getTime();return new Date(k.date||0).getTime()-i})}function g(A){if(!A)return"";const a=new Date(A);if(isNaN(a))return A;try{return new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(a)}catch(O){return a.toISOString().slice(0,10)}}function p(){var A,a;((a=(A=document.body)==null?void 0:A.dataset)==null?void 0:a.page)==="home"&&window.MIROZA.utils.qs("#india-news-cards")&&window.MIROZA.pagination.mount({targetSelector:"#india-news-cards",controlsSelector:"#india-news-controls",getData:()=>d,pageSize:4,emptyMessage:"India desk coverage publishes shortly.",mode:"load-more",autoLoad:!0})}function r(){var A,a;((a=(A=document.body)==null?void 0:A.dataset)==null?void 0:a.page)==="india-news"&&window.MIROZA.utils.qs("#india-news-list")&&window.MIROZA.pagination.mount({targetSelector:"#india-news-list",controlsSelector:"#india-news-pagination",getData:()=>d,pageSize:6,emptyMessage:"India desk stories are being prepared.",mode:"load-more",autoLoad:!0})}function b(){var a,O;const A=(O=(a=document.body)==null?void 0:a.dataset)==null?void 0:O.page;if(!(!A||t===A)){if(A==="home"){p(),t=A;return}A==="india-news"&&(r(),t=A)}}function C(){var a,O;const A=(O=(a=document.body)==null?void 0:a.dataset)==null?void 0:O.page;A!=="home"&&A!=="india-news"||_().then(()=>b())}function _(){return n||(n=M()),n}function v(A){var a,O;if(f(A)){const k=(O=(a=document.body)==null?void 0:a.dataset)==null?void 0:O.page;(k==="home"||k==="india-news")&&window.requestAnimationFrame(()=>b())}}return{init:C,ready:_,items:()=>d.slice(),prime:v}})(),window.MIROZA.prefetch=(function(){const c="relList"in document.createElement("link")&&document.createElement("link").relList.supports&&document.createElement("link").relList.supports("prefetch");function d(t){const f=t.target.closest("a[data-prefetch]");if(!f||!c||f.dataset.prefetched)return;const M=document.createElement("link");M.rel="prefetch",M.href=f.href,document.head.appendChild(M),f.dataset.prefetched="true"}function n(){document.addEventListener("mouseover",d),document.addEventListener("touchstart",d,{passive:!0})}return{init:n}})(),window.MIROZA.ui=(function(){let c,d,n,t=!1,f;const M=2500;function h(){const A=window.scrollY||document.documentElement.scrollTop||0;c&&c.classList.toggle("is-stuck",A>24),d&&d.classList.toggle("visible",A>480)}function g(){d&&d.addEventListener("click",()=>{const A=window.MIROZA.utils.prefersReducedMotion()?"auto":"smooth";window.scrollTo({top:0,behavior:A})})}function p(){const A=window.MIROZA.utils.qsa("[data-lazy]");if(A.length){if(!("IntersectionObserver"in window)){A.forEach(a=>a.classList.add("lazy-ready"));return}n==null||n.disconnect(),n=new IntersectionObserver(a=>{a.forEach(O=>{O.isIntersecting&&(O.target.classList.add("lazy-ready"),n.unobserve(O.target))})},{rootMargin:"0px 0px -10% 0px"}),A.forEach(a=>n.observe(a)),window.clearTimeout(f),f=window.setTimeout(r,M)}}function r(){window.MIROZA.utils.qsa("[data-lazy]:not(.lazy-ready)").forEach(A=>A.classList.add("lazy-ready"))}function b(){c=window.MIROZA.utils.qs(".site-header"),d=window.MIROZA.utils.qs(".back-to-top"),g(),window.addEventListener("scroll",()=>{t||(t=!0,window.requestAnimationFrame(()=>{h(),t=!1}))},{passive:!0}),h(),p(),C()}function C(){const A=window.MIROZA.utils.qsa(".single-article img, main img[data-enhance-responsive]");A.length&&A.forEach(a=>{if(a&&(a.getAttribute("loading")||(a.loading="lazy"),a.decoding="async",!a.hasAttribute("srcset"))){const O=_(a.getAttribute("src"));O&&(a.setAttribute("srcset",O),a.hasAttribute("sizes")||a.setAttribute("sizes","(max-width: 900px) 100vw, 800px"))}})}function _(A){return!A||!/images\.(unsplash|pexels)\.com/i.test(A)?null:[480,768,1200].map(k=>`${v(A,k)} ${k}w`).join(", ")}function v(A,a){const O=`w=${a}`;if(/w=\d+/i.test(A))return A.replace(/w=\d+/gi,O);const k=A.includes("?")?"&":"?";return`${A}${k}${O}`}return{init:b,hydrateLazySections:p}})(),window.MIROZA.forms=(function(){const c="miroza_newsletter_optin";function n(b){return typeof b!="string"?"":window.DOMPurify?DOMPurify.sanitize(b,{ALLOWED_TAGS:[],ALLOWED_ATTR:[]}):b.replace(/[<>]/g,"")}function t(b){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b)}function f(b,C,_){try{if(b==="get")return localStorage.getItem(C);b==="set"&&localStorage.setItem(C,_),b==="remove"&&localStorage.removeItem(C)}catch(v){}return null}function M(b,C,_="info"){b&&(b.textContent=C,b.dataset.state=_)}function h(b){b.classList.add("is-success"),window.MIROZA.utils.qsa("input, button",b).forEach(C=>{C.disabled=!0})}function g(b){return new Promise(C=>{window.setTimeout(()=>C({ok:!0,...b}),900)})}function p(){const b=window.MIROZA.utils.qs("#newsletter-form");if(!b)return;const C=b.querySelector('input[type="email"]'),_=b.querySelector(".form-feedback"),v=b.querySelector('button[type="submit"]');!C||!_||!v||(f("get",c)==="subscribed"&&(M(_,"You are already subscribed.","success"),h(b)),b.addEventListener("submit",A=>{if(A.preventDefault(),b.classList.contains("is-loading"))return;const a=n(C.value.trim());if(!t(a)){M(_,"Enter a valid email address.","error"),C.focus();return}b.classList.add("is-loading"),v.disabled=!0,M(_,"Subscribing you now\u2026","pending");const O=k=>{b.classList.remove("is-loading"),k||(v.disabled=!1)};g({email:a}).then(()=>{M(_,"You are officially on the list. Welcome aboard!","success"),f("set",c,"subscribed"),h(b),O(!0)}).catch(()=>{M(_,"We could not reach the server. Please try again.","error"),O(!1)})}))}function r(){p()}return{init:r}})(),window.MIROZA.community=(function(){const c="miroza_comments_v1",d="miroza_likes_v1";let t={},f=null;function M(m){return typeof m!="string"?"":window.DOMPurify?DOMPurify.sanitize(m,{ALLOWED_TAGS:[],ALLOWED_ATTR:[]}):m.replace(/[<>]/g,"")}function h(){const m=document.body;return m.dataset.articleId?m.dataset.articleId:m.dataset.slug?m.dataset.slug:window.location.pathname.replace(/\/+/g,"/").replace(/\/$/,"")||"home"}function g(){try{const m=localStorage.getItem(c);return m&&(t=JSON.parse(m)||{}),t}catch(m){return t}}function p(m){t=m;try{localStorage.setItem(c,JSON.stringify(m))}catch(S){}}function r(){if(f)return f;try{const m=localStorage.getItem(d);f=m?JSON.parse(m):{}}catch(m){f={}}return f}function b(m){f=m;try{localStorage.setItem(d,JSON.stringify(m))}catch(S){}}function C(m,S,x="info"){m&&(m.textContent=S,m.dataset.state=x)}function _(m){try{return new Intl.DateTimeFormat("en",{month:"short",day:"numeric",year:"numeric"}).format(new Date(m))}catch(S){return new Date(m).toLocaleDateString()}}function v(m,S){if(m){if(m.innerHTML="",!S.length){const x=document.createElement("li");x.className="card-meta",x.textContent="No comments yet. Share your perspective below (stored locally only).",m.appendChild(x);return}S.forEach(x=>{const P=document.createElement("li");P.className="comment-card";const $=document.createElement("div");$.className="comment-meta",$.textContent=`${x.name} \u2022 ${_(x.ts)}`;const W=document.createElement("p");W.textContent=x.comment,P.appendChild($),P.appendChild(W),m.appendChild(P)})}}function A(m){const S=h(),x={...g()},P=x[S]?[...x[S]]:[];return P.push(m),x[S]=P.slice(-20),p(x),x[S]}function a(m,S){const x=h(),P={...r()},$=!P[x];$?P[x]=!0:delete P[x],b(P),m&&(m.dataset.liked=$?"true":"false",m.setAttribute("aria-pressed",$?"true":"false"),m.textContent=$?"\u2665 Liked":"\u2661 Appreciate"),C(S,$?"Thanks for the love!":"Like removed.","success")}function O(m,S,x){var X,J;const P=window.location.href,$=document.title,W=((X=document.querySelector('meta[name="description"]'))==null?void 0:X.content)||"Discover more from MIROZA.",V=encodeURIComponent(P);if(m==="like"){a(x,S);return}if(m==="copy"){(J=navigator.clipboard)!=null&&J.writeText?navigator.clipboard.writeText(P).then(()=>C(S,"Link copied to clipboard.","success")).catch(()=>k(P,S)):k(P,S);return}if(m==="twitter"){window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent($)}&url=${V}`,"_blank","noopener"),C(S,"Opening X (Twitter)\u2026","pending");return}if(m==="linkedin"){window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${V}`,"_blank","noopener"),C(S,"Opening LinkedIn\u2026","pending");return}if(m==="native"&&navigator.share){navigator.share({title:$,text:W,url:P}).then(()=>C(S,"Thanks for sharing!","success")).catch(()=>C(S,"Share cancelled.","info"));return}O("copy",S)}function k(m,S){window.prompt("Copy this link and share it anywhere:",m)!==null&&C(S,"Copy the highlighted link to share.","info")}function i(m){let S=m.querySelector(".share-actions");if(!S){S=document.createElement("div"),S.className="share-actions",S.setAttribute("aria-label","Share actions");const P=[{type:"native",label:"Quick share"},{type:"twitter",label:"Post to X"},{type:"linkedin",label:"Share on LinkedIn"},{type:"copy",label:"Copy link"}],$=document.createDocumentFragment();P.forEach(J=>{const re=document.createElement("button");re.type="button",re.dataset.share=J.type,re.textContent=J.label,$.appendChild(re)});const W=document.createElement("button");W.type="button",W.dataset.share="like",W.classList.add("like-btn");const V=!!r()[h()];W.dataset.liked=V?"true":"false",W.setAttribute("aria-pressed",V?"true":"false"),W.textContent=V?"\u2665 Liked":"\u2661 Appreciate",$.appendChild(W),S.appendChild($);const X=m.querySelector("header");X?X.insertAdjacentElement("afterend",S):m.prepend(S)}let x=m.querySelector(".share-feedback");return x||(x=document.createElement("p"),x.className="form-feedback share-feedback",x.setAttribute("aria-live","polite"),x.textContent="",S.insertAdjacentElement("afterend",x)),{block:S,feedback:x}}function u(m){let S=m.querySelector(".comments");if(!S){const P=`comments-${(h().split("/").pop()||"story").replace(/[^a-z0-9]+/gi,"-")}`;S=document.createElement("section"),S.className="comments",S.setAttribute("aria-labelledby",`${P}-heading`),S.innerHTML=`
          <h2 id="${P}-heading">Join the conversation</h2>
          <form class="comment-form" novalidate>
            <label for="${P}-name">Name</label>
            <input type="text" id="${P}-name" name="name" maxlength="60" placeholder="Your name" required />
            <label for="${P}-body">Comment</label>
            <textarea id="${P}-body" name="comment" maxlength="500" placeholder="Be constructive and kind." required></textarea>
            <input type="text" name="company" class="hidden" tabindex="-1" autocomplete="off" aria-hidden="true" />
            <p class="form-feedback" aria-live="polite"></p>
            <button type="submit">Post comment</button>
          </form>
          <ul class="comment-list" aria-live="polite"></ul>
        `,m.appendChild(S)}return S}function l(m,S){!m||m.dataset.shareBound||(m.dataset.shareBound="true",m.addEventListener("click",x=>{const P=x.target.closest("button[data-share]");if(!P)return;const $=P.dataset.share;O($,S,P)}))}function y(m){const S=m.querySelector("form"),x=m.querySelector(".comment-list"),P=S.querySelector(".form-feedback"),W=g()[h()]||[];v(x,W),C(P,"Comments stay on this device until realtime APIs are wired up.","info"),S.addEventListener("submit",V=>{V.preventDefault();const X=new FormData(S);if(X.get("company")){S.reset();return}const J=M((X.get("name")||"Guest").trim()).slice(0,60)||"Guest",re=M((X.get("comment")||"").trim());if(re.length<5){C(P,"Please add a bit more detail (minimum 5 characters).","error");return}const ae={name:J,comment:re,ts:Date.now()},ce=A(ae);v(x,ce),C(P,"Comment captured locally for preview. \u2705","success"),S.reset()})}function w(){if(document.body.dataset.page!=="article")return;const m=window.MIROZA.utils.qs(".single-article");if(!m)return;const{block:S,feedback:x}=i(m);l(S,x);const P=u(m);y(P)}function L(){w()}function z(){return{...r()}}return{init:L,getLikedMap:z}})(),window.MIROZA.breadcrumbs=(function(){const c={article:{label:"Articles",href:"/articles.html"},"blog-article":{label:"Blogs",href:"/blog.html"},"news-article":{label:"News",href:"/news.html"}};function d(){var b,C,_;const f=(C=(b=document.body)==null?void 0:b.dataset)==null?void 0:C.page;if(!f||!c[f])return;const M=window.MIROZA.utils.qs(".single-article")||window.MIROZA.utils.qs("main");if(!M||M.querySelector(".breadcrumbs"))return;const h=M.querySelector("h1")||window.MIROZA.utils.qs("h1"),g=(_=h==null?void 0:h.textContent)==null?void 0:_.trim();if(!g)return;const p=n(f,g),r=t(p);r&&M.insertAdjacentElement("afterbegin",r)}function n(f,M){const h=[{label:"Home",href:"/"}],g=c[f];return g&&h.push(g),h.push({label:M,current:!0}),h}function t(f){if(!Array.isArray(f)||f.length<2)return null;const M=document.createElement("nav");M.className="breadcrumbs",M.setAttribute("aria-label","Breadcrumb");const h=document.createElement("ol");return f.forEach(g=>{const p=document.createElement("li");if(g.current||!g.href)p.textContent=g.label,p.setAttribute("aria-current","page");else{const r=document.createElement("a");r.href=g.href,r.textContent=g.label,r.setAttribute("data-prefetch",""),p.appendChild(r)}h.appendChild(p)}),M.appendChild(h),M}return{init:d}})(),window.MIROZA.seo=(function(){const c=`${de}/assets/images/hero-insight-1200.svg`,d=`${de}/assets/icons/logo.svg`,n="news, blog, articles, analysis, intelligence, MIROZA",t="MIROZA Editorial Desk";function f(){if(!(document!=null&&document.head))return;const u=M();h(u),g(u)}function M(){var L;const u=i(),l=((L=window.location)==null?void 0:L.pathname)||"/",y=new URL(l,u).toString();let w=document.head.querySelector('link[rel="canonical"]');return w||(w=document.createElement("link"),w.rel="canonical",document.head.appendChild(w)),w.href=y,y}function h(u){var m,S;const l=(document.title||"MIROZA").trim(),y=a(),w=n,L=((S=(m=document.head.querySelector('meta[name="author"]'))==null?void 0:m.content)==null?void 0:S.trim())||t,z=O();A("description",y),A("keywords",w),A("author",L),A("last-modified",new Date(document.lastModified||Date.now()).toISOString()),A("og:title",l,"property"),A("og:description",y,"property"),A("og:url",u,"property"),A("og:image",z,"property"),A("twitter:title",l),A("twitter:description",y),A("twitter:image",z)}function g(u){p(u),r(),b()}function p(u){var P,$,W,V,X,J;const l=($=(P=document.body)==null?void 0:P.dataset)==null?void 0:$.page;if(!["article","news-article","blog-article"].includes(l)||document.head.querySelector('script[type="application/ld+json"][data-seo="article"]')||_(S))return;const y=((V=(W=document.querySelector(".single-article h1"))==null?void 0:W.textContent)==null?void 0:V.trim())||document.title;if(!y)return;const w=a(),L=O(),z=((J=(X=document.head.querySelector('meta[name="author"]'))==null?void 0:X.content)==null?void 0:J.trim())||t,m=k(),S=l==="blog-article"?"BlogPosting":"NewsArticle",x={"@context":"https://schema.org","@type":S,headline:y,description:w,image:L,datePublished:m,dateModified:new Date(document.lastModified||Date.now()).toISOString(),author:{"@type":"Organization",name:z},publisher:{"@type":"Organization",name:"MIROZA",logo:{"@type":"ImageObject",url:d}},mainEntityOfPage:u};C(x,"article")}function r(){var L;const u=document.querySelector(".breadcrumbs ol");if(!u||document.head.querySelector('script[type="application/ld+json"][data-seo="breadcrumbs"]')||_("BreadcrumbList"))return;const l=i(),y=((L=document.head.querySelector('link[rel="canonical"]'))==null?void 0:L.href)||l,w=Array.from(u.querySelectorAll("li")).map((z,m)=>{const S=z.querySelector("a"),x=S?new URL(S.getAttribute("href"),l).toString():y;return{"@type":"ListItem",position:m+1,name:z.textContent.trim(),item:x}});w.length&&C({"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:w},"breadcrumbs")}function b(){var y,w;if(((w=(y=document.body)==null?void 0:y.dataset)==null?void 0:w.page)!=="home"||document.head.querySelector('script[type="application/ld+json"][data-seo="website"]')||_("WebSite"))return;const u=i(),l={"@context":"https://schema.org","@type":"WebSite",url:u,name:"MIROZA",potentialAction:{"@type":"SearchAction",target:`${u}/?q={search_term_string}`,"query-input":"required name=search_term_string"}};C(l,"website")}function C(u,l){const y=document.createElement("script");y.type="application/ld+json",y.dataset.seo=l,y.textContent=JSON.stringify(u),document.head.appendChild(y)}function _(u){return Array.from(document.head.querySelectorAll('script[type="application/ld+json"]')).some(y=>{try{const w=JSON.parse(y.textContent);return Array.isArray(w)?w.some(L=>v(L,u)):v(w,u)}catch(w){return!1}})}function v(u,l){if(!u||!u["@type"])return!1;const y=u["@type"];return Array.isArray(y)?y.includes(l):y===l}function A(u,l,y="name"){if(!l)return;let w=document.head.querySelector(`meta[${y}="${u}"]`);w||(w=document.createElement("meta"),w.setAttribute(y,u),document.head.appendChild(w));const L=w.getAttribute("content");(!L||/example\.com|lorem ipsum/i.test(L))&&w.setAttribute("content",l)}function a(){var y;const u=(y=document.head.querySelector('meta[name="description"]'))==null?void 0:y.getAttribute("content");if(u&&!/example\.com/i.test(u))return u;const l=document.querySelector(".single-article p, main p");if(l){const w=l.textContent.trim();if(w)return w.length>160?`${w.slice(0,157)}...`:w}return"MIROZA curates fast, accessible intelligence across news, blogs, and analytical articles."}function O(){const u=document.querySelector(".single-article img, .hero img"),l=(u==null?void 0:u.currentSrc)||(u==null?void 0:u.src);if(l)try{return new URL(l,i()).toString()}catch(y){return l}return c}function k(){const u=document.querySelector("time[datetime]"),l=document.head.querySelector('meta[name="date"], meta[property="article:published_time"]'),y=(u==null?void 0:u.getAttribute("datetime"))||(l==null?void 0:l.getAttribute("content"));if(y){const w=new Date(y);if(!isNaN(w))return w.toISOString()}return new Date(document.lastModified||Date.now()).toISOString()}function i(){try{const{protocol:u,host:l}=window.location;if(l&&!/localhost|127\.0\.0\.1/i.test(l))return`${u}//${l}`}catch(u){}return de}return{init:f}})(),window.MIROZA.search=(function(){let n,t,f=[],M=[],h=[],g=-1,p;function r(){var i;n=window.MIROZA.utils.qs("#search"),t=window.MIROZA.utils.qs("#search-suggestions"),!(!n||!t)&&(b(),window.MIROZA.posts.ready().then(u=>{f=u||[]}).catch(()=>{}),(i=window.MIROZA.blogs)!=null&&i.ready&&window.MIROZA.blogs.ready().then(u=>{M=u?window.MIROZA.blogs.all?window.MIROZA.blogs.all():u:[]}).catch(()=>{}))}function b(){n.addEventListener("input",C,{passive:!0}),n.addEventListener("focus",()=>{n.value.trim().length>=2&&_(n.value.trim())}),n.addEventListener("keydown",A),document.addEventListener("click",i=>{i.target===n||t.contains(i.target)||k()}),t.addEventListener("mousedown",i=>i.preventDefault()),t.addEventListener("click",i=>{const u=i.target.closest(".search-suggestion");if(!u)return;const l=Number(u.dataset.index);O(l)})}function C(){const i=n.value.trim();if(window.clearTimeout(p),i.length<2){k();return}p=window.setTimeout(()=>_(i),120)}function _(i){const u=i.toLowerCase(),y=[...f,...M].filter(w=>[w.title,w.excerpt,w.category].filter(Boolean).join(" ").toLowerCase().includes(u)).slice(0,5).map(w=>({title:w.title,category:w.category||"Story",link:w.link||(w.slug?`/articles/${w.slug}.html`:"#")}));h=y,g=y.length?0:-1,v()}function v(){if(t){if(t.innerHTML="",!h.length){k();return}h.forEach((i,u)=>{const l=document.createElement("button");l.type="button",l.className="search-suggestion"+(u===g?" is-active":""),l.dataset.index=String(u),l.setAttribute("role","option");const y=document.createElement("strong");y.textContent=i.title;const w=document.createElement("span");w.textContent=i.category,l.appendChild(y),l.appendChild(w),t.appendChild(l)}),t.hidden=!1}}function A(i){t.hidden||(i.key==="ArrowDown"?(i.preventDefault(),a(1)):i.key==="ArrowUp"?(i.preventDefault(),a(-1)):i.key==="Enter"?g>-1&&(i.preventDefault(),O(g)):i.key==="Escape"&&k())}function a(i){h.length&&(g=(g+i+h.length)%h.length,v())}function O(i){const u=h[i];u&&(window.location.href=u.link,k())}function k(){t&&(t.hidden=!0,g=-1,t.innerHTML="")}return{init:r}})(),window.MIROZA.filters=(function(){let c=null;function d({onChange:t}={}){const f=window.MIROZA.utils.qs("#latest-filters");if(!f)return;const M=window.MIROZA.utils.qsa("button[data-filter]",f);if(!M.length)return;let h="all";function g(p){h=p,M.forEach(r=>r.setAttribute("aria-pressed",r.dataset.filter===h?"true":"false")),t==null||t(h)}c={setActive:g},f.addEventListener("click",p=>{const r=p.target.closest("button[data-filter]");!r||r.dataset.filter===h||g(r.dataset.filter)})}function n(t){t&&(c==null||c.setActive(t))}return{initLatest:d,setLatestFilter:n}})(),window.MIROZA.quickFind=(function(){const c={recent:"miroza_recent_reads_v1",saved:"miroza_saved_stories_v1"},d=8,n={recents:[],savedManual:[]},t={panel:null,toggle:null,recent:null,saved:null,categories:null,title:null},f=new Set;let M=[],h=[],g=null,p=[];function r(){C(),!(!t.panel||!t.toggle)&&(a(),_(),v(),A(),G(),ee(),oe())}function b(e){p=Array.isArray(e)?e:[],oe()}function C(){t.panel=document.getElementById("quick-find"),t.toggle=window.MIROZA.utils.qs(".quick-find-toggle"),t.recent=document.getElementById("quick-find-recent"),t.saved=document.getElementById("quick-find-saved"),t.categories=document.getElementById("quick-find-categories"),t.title=document.getElementById("quick-find-title")}function _(){window.MIROZA.utils.qsa("#latest-filters button[data-filter]").forEach(e=>{e!=null&&e.dataset.filter&&f.add(e.dataset.filter)})}function v(){var e;t.toggle.addEventListener("click",S),window.MIROZA.utils.qsa('[data-close="quick-find"]',t.panel).forEach(s=>s.addEventListener("click",m)),document.addEventListener("keydown",i),document.addEventListener("click",u,!0),t.panel.addEventListener("click",l),(e=t.categories)==null||e.addEventListener("click",y)}function A(){var R,T,B,U;const e=((T=(R=window.MIROZA.posts)==null?void 0:R.ready)==null?void 0:T.call(R))||Promise.resolve([]),s=((U=(B=window.MIROZA.blogs)==null?void 0:B.ready)==null?void 0:U.call(B).then(()=>window.MIROZA.blogs.all?window.MIROZA.blogs.all():[]))||Promise.resolve([]);Promise.all([e,s]).then(([Y,se])=>{M=[...Y||[],...se||[]],oe(),ee()}).catch(()=>{})}function a(){n.recents=O(c.recent),n.savedManual=O(c.saved)}function O(e){var s;try{const R=(s=window.localStorage)==null?void 0:s.getItem(e);return R?JSON.parse(R):[]}catch(R){return[]}}function k(e,s){var R;try{(R=window.localStorage)==null||R.setItem(e,JSON.stringify(s))}catch(T){}}function i(e){if(e.key==="Escape"&&x()){e.preventDefault(),m();return}if((e.key==="k"||e.key==="K")&&(e.metaKey||e.ctrlKey)){const s=e.target;if(L(s))return;e.preventDefault(),z()}}function u(e){const s=e.target.closest("a[data-track-story]");if(!s)return;const R=P(s);R&&W(R)}function l(e){const s=e.target.closest("[data-quick-find-action]");if(s){const{quickFindAction:T,storyId:B,storyHref:U}=s.dataset;T==="save"&&J(B,U),T==="remove"&&re(B,U);return}e.target.closest(".quick-find__details a")&&m()}function y(e){var T,B;const s=e.target.closest("button[data-category]");if(!s)return;const R=s.dataset.action;if(R==="filter"){const U=s.dataset.filterKey||s.dataset.category;U&&((B=(T=window.MIROZA.filters)==null?void 0:T.setLatestFilter)==null||B.call(T,U)),m(),Q(()=>w(U));return}R==="navigate"&&s.dataset.href&&(m(),window.location.href=s.dataset.href)}function w(e){e&&window.setTimeout(()=>{const s=window.MIROZA.utils.qs(`#latest-filters button[data-filter="${e}"]`);s==null||s.focus()},220)}function L(e){if(!e)return!1;const s=e.tagName;return e.isContentEditable||s==="INPUT"||s==="TEXTAREA"||s==="SELECT"}function z(){x()||(g=document.activeElement,t.panel.hidden=!1,document.body.classList.add("quick-find-open"),t.toggle.setAttribute("aria-expanded","true"),window.requestAnimationFrame(()=>{var e;return(e=t.title)==null?void 0:e.focus()}),G(),ee())}function m(){var e;x()&&(t.panel.hidden=!0,document.body.classList.remove("quick-find-open"),t.toggle.setAttribute("aria-expanded","false"),(e=g==null?void 0:g.focus)==null||e.call(g),g=null)}function S(){x()?m():z()}function x(){return!!t.panel&&!t.panel.hidden}function P(e){var U;const s=e.dataset||{},R=e.href;if(!R)return null;const T=$(s.trackStory||s.trackSlug),B=s.trackTitle||(T==null?void 0:T.title)||((U=e.textContent)==null?void 0:U.trim());return B?{id:s.trackStory||(T==null?void 0:T.id)||s.trackSlug||R,slug:s.trackSlug||(T==null?void 0:T.slug)||"",title:B,category:s.trackCategory||(T==null?void 0:T.category)||"Story",href:R,ts:Date.now()}:null}function $(e){var s,R;return e&&((R=(s=window.MIROZA.posts)==null?void 0:s.byId)==null?void 0:R.call(s,e))||null}function W(e){if(!e)return;const s=n.recents.filter(R=>!N(R,e.id,e.href));n.recents=[e,...s].slice(0,d),V(),x()&&G()}function V(){k(c.recent,n.recents)}function X(){k(c.saved,n.savedManual.slice(0,d))}function J(e,s){const R=n.savedManual.findIndex(T=>N(T,e,s));if(R>-1)n.savedManual.splice(R,1);else{const T=ae(e,s);T&&n.savedManual.unshift({...T,ts:Date.now()})}n.savedManual=n.savedManual.slice(0,d),X(),ee(),G()}function re(e,s){const R=n.savedManual.filter(T=>!N(T,e,s));R.length!==n.savedManual.length&&(n.savedManual=R,X(),ee(),G())}function ae(e,s){return n.recents.find(R=>N(R,e,s))||n.savedManual.find(R=>N(R,e,s))||I($(e)||ce(s))}function ce(e){var s,R,T;if(!e||!M.length)return null;try{const U=(s=new URL(e,window.location.origin).pathname.split("/").pop())==null?void 0:s.replace(".html","");return U&&((T=(R=window.MIROZA.posts)==null?void 0:R.byId)==null?void 0:T.call(R,U))||null}catch(B){return null}}function I(e){if(!e)return null;const s=Date.parse(e.date||"")||Date.now();return{id:e.id||e.slug||e.link,slug:e.slug||"",title:e.title,category:e.category||"Story",href:e.link||(e.slug?`/articles/${e.slug}.html`:"#"),ts:s}}function N(e,s,R){return e?!!(s&&(e.id===s||e.slug===s)||R&&e.href===R):!1}function F(){return h=j(),h}function j(){const e=new Set,s=n.savedManual.map(T=>({...T,origin:"manual"})),R=K();return[...s,...R].filter(T=>{const B=T.id||T.href;return!B||e.has(B)?!1:(e.add(B),!0)})}function K(){var s,R;const e=((R=(s=window.MIROZA.community)==null?void 0:s.getLikedMap)==null?void 0:R.call(s))||{};return Object.keys(e).map(T=>{var Y,se;const B=T.split("/").filter(Boolean).pop(),U=B?((se=(Y=window.MIROZA.posts)==null?void 0:Y.byId)==null?void 0:se.call(Y,B))||M.find(te=>te.slug===B):null;return U?{...I(U),origin:"liked"}:null}).filter(Boolean)}function G(){if(!t.recent)return;const e=document.createDocumentFragment(),s=n.recents,R=new Set(F().map(T=>T.id||T.href));s.length?s.forEach(T=>e.appendChild(D(T,{allowToggle:!0,isPinned:R.has(T.id||T.href)}))):e.appendChild(q("Explore a story to see it here.")),t.recent.innerHTML="",t.recent.appendChild(e)}function ee(){if(!t.saved)return;const e=document.createDocumentFragment(),s=F();s.length?s.forEach(R=>e.appendChild(D(R,{allowRemoval:R.origin==="manual"}))):e.appendChild(q("Tap the heart inside an article or pin a recent story.")),t.saved.innerHTML="",t.saved.appendChild(e)}function oe(){if(!t.categories)return;t.categories.innerHTML="";const e=ne();if(!e.length){const s=document.createElement("p");s.className="quick-find__meta",s.textContent="Stories are loading\u2026",t.categories.appendChild(s);return}e.forEach(s=>{const R=document.createElement("button");R.type="button",R.dataset.category=s.slug,R.dataset.action=s.action,s.filterKey&&(R.dataset.filterKey=s.filterKey),s.href&&(R.dataset.href=s.href),R.textContent=`${s.label} (${s.count})`,t.categories.appendChild(R)})}function ne(){if(p.length)return p.slice(0,8).map(s=>{const R=Z(s.slug||s.label),T=s.label||s.title||R,B=typeof s.count=="number"?s.count:0,U=E(R);if(U)return{slug:R,label:T,count:B,action:"filter",filterKey:U};const Y=s.href||o(R);return Y?{slug:R,label:T,count:B,action:"navigate",href:Y}:null}).filter(Boolean);if(!M.length)return[];const e={};return M.forEach(s=>{const R=(s.category||"").trim();if(!R)return;const T=Z(R);T&&(e[T]||(e[T]={label:R,slug:T,count:0}),e[T].count+=1,e[T].label=R)}),Object.values(e).sort((s,R)=>R.count-s.count).slice(0,8).map(s=>{const R=E(s.slug);if(R)return{...s,action:"filter",filterKey:R};const T=o(s.slug);return T?{...s,action:"navigate",href:T}:null}).filter(Boolean)}function o(e){return e?me(e):null}function E(e){if(!e)return null;if(f.has(e))return e;if(e.endsWith("s")){const s=e.slice(0,-1);if(f.has(s))return s}return null}function Z(e){return(e||"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function q(e){const s=document.createElement("li");return s.className="empty",s.textContent=e,s}function D(e,{allowToggle:s=!1,isPinned:R=!1,allowRemoval:T=!1}={}){const B=document.createElement("li"),U=document.createElement("div");U.className="quick-find__details";const Y=document.createElement("a");Y.href=e.href||"#",Y.textContent=e.title,Y.setAttribute("data-prefetch",""),Y.setAttribute("data-track-story",e.id||e.slug||""),Y.dataset.trackSlug=e.slug||"",Y.dataset.trackTitle=e.title,Y.dataset.trackCategory=e.category||"Story";const se=document.createElement("p");if(se.className="quick-find__meta",se.textContent=[e.category,H(e.ts)].filter(Boolean).join(" \u2022 "),U.appendChild(Y),U.appendChild(se),B.appendChild(U),s){const te=document.createElement("button");te.type="button",te.className="quick-find__action",te.dataset.quickFindAction="save",te.dataset.storyId=e.id||"",te.dataset.storyHref=e.href||"",te.textContent=R?"Saved":"Save",te.setAttribute("aria-pressed",R?"true":"false"),B.appendChild(te)}else if(T){const te=document.createElement("button");te.type="button",te.className="quick-find__action",te.dataset.quickFindAction="remove",te.dataset.storyId=e.id||"",te.dataset.storyHref=e.href||"",te.textContent="Remove",B.appendChild(te)}return B}function H(e){if(!e)return"";const s=Date.now()-e,R=60*1e3,T=60*R,B=24*T;try{const U=new Intl.RelativeTimeFormat("en",{numeric:"auto"});return s<R?"Just now":s<T?U.format(-Math.round(s/R),"minute"):s<B?U.format(-Math.round(s/T),"hour"):U.format(-Math.round(s/B),"day")}catch(U){return new Date(e).toLocaleString()}}function Q(e){const s=document.getElementById("latest-heading");s&&s.scrollIntoView({behavior:window.MIROZA.utils.prefersReducedMotion()?"auto":"smooth",block:"start"}),typeof e=="function"&&window.setTimeout(e,300)}return{init:r,open:z,close:m,setCategories:b}})(),window.MIROZA.homeFeed=(function(){const c=["news","articles","blogs"],d={limits:{news:24,articles:24,blogs:18},minimum:{news:18,articles:18,blogs:12},displayLimit:60,minimumDisplay:40,pageSize:12,immediateCount:12};let n={...d},t=null,f=null,M=null,h=null,g=[],p=[],r=0,b="all",C={};function _(I={}){var N,F;document.body.dataset.page==="home"&&(n={...d,...I},n.immediateCount=Math.min(n.immediateCount||n.pageSize,n.pageSize),t=document.querySelector("[data-home-feed]")||document.getElementById("latest-cards"),t&&(t.dataset.homeFeedManaged="true",f=document.querySelector("[data-home-feed-pagination]")||document.getElementById("latest-pagination"),(F=(N=window.MIROZA.filters)==null?void 0:N.initLatest)==null||F.call(N,{onChange:v}),X(!0),Promise.all([window.MIROZA.posts.ready(),window.MIROZA.blogs.ready()]).then(()=>A()).catch(j=>{console.error("MIROZA: Home feed failed to load",j),W("We hit a snag loading stories. Visit the category pages instead.")})))}function v(I){const N=I||"all";N!==b&&(b=N,m())}function A(){return a().then(I=>{var j,K;const N=k(I);g=N.feed,C.selected=N.selectedCounts;const F=((K=(j=window.MIROZA.feedTools)==null?void 0:j.getAudit)==null?void 0:K.call(j))||{};C.filesRead=F.filesRead,C.htmlFallbacks=F.htmlFallbacks,C.totalRendered=g.length,g.length<n.minimumDisplay?(C.shortfall=n.minimumDisplay-g.length,console.warn(`[MIROZA] Mixed feed shortfall: ${g.length}/${n.minimumDisplay}`)):delete C.shortfall,ce(),b="all",m()})}function a(){const I={news:window.MIROZA.posts.byType?window.MIROZA.posts.byType("news"):[],articles:window.MIROZA.posts.byType?window.MIROZA.posts.byType("article"):[],blogs:window.MIROZA.blogs.all?window.MIROZA.blogs.all():[]};return C={sourceCounts:c.reduce((N,F)=>(N[F]=(I[F]||[]).length,N),{})},Promise.all(c.map(N=>O(N,I[N]||[]))).then(N=>{const F={};return N.forEach((j,K)=>{var ee;const G=c[K];F[G]=j,C.toppedUp||(C.toppedUp={}),C.toppedUp[G]=Math.max(0,((j==null?void 0:j.length)||0)-(((ee=C.sourceCounts)==null?void 0:ee[G])||0))}),F})}function O(I,N){var ee,oe,ne;const F=i(N||[]),j=((ee=n.minimum)==null?void 0:ee[I])||F.length;if(F.length>=j||!((oe=window.MIROZA.feedTools)!=null&&oe.scanType))return Promise.resolve(F);const K=I==="blogs"?"blogs":I==="articles"?"articles":"news",G=Math.max(j*2,((ne=n.limits)==null?void 0:ne[I])||j);return window.MIROZA.feedTools.scanType(K,G).then(o=>i(F.concat(o||[]))).catch(()=>F)}function k(I){const N={news:0,articles:0,blogs:0},F=c.map(ne=>{var D,H;const E=i(I[ne]||[]).slice().sort((Q,e)=>J(e)-J(Q)),Z=(H=(D=n.limits)==null?void 0:D[ne])!=null?H:n.displayLimit,q=E.slice(0,Z).map(y);return window.MIROZA.utils.shuffle(q),N[ne]=q.length,{type:ne,items:q}}),j=l(F),G=window.MIROZA.utils.shuffle(j.slice()).sort((ne,o)=>J(o)-J(ne)),ee=Math.max(n.displayLimit,n.minimumDisplay);return{feed:G.slice(0,ee),selectedCounts:N}}function i(I){const N=new Map;return I.forEach(F=>{const j=re(F);if(!j)return;const K=N.get(j),G=u(F),ee=J(F);(!K||G>K.score||G===K.score&&ee>K.dateValue)&&N.set(j,{item:F,score:G,dateValue:ee})}),Array.from(N.values()).map(F=>F.item)}function u(I){return(I==null?void 0:I.__source)==="json"?2:1}function l(I){const N=I.map(G=>G.items.slice()),F=[],j=new Map,K=Math.max(n.displayLimit,n.minimumDisplay);for(;F.length<K;){let G=!1;for(const ee of N){const oe=ee.shift();if(!oe)continue;const ne=re(oe),o=J(oe);if(ne){const E=j.get(ne);if(E&&E.dateValue>=o)continue;j.set(ne,{dateValue:o})}if(F.push(oe),G=!0,F.length>=K)break}if(!G)break}return F}function y(I){const N=z(I.link||I.url||(I.slug?`/articles/${I.slug}.html`:"#")),F=I.image&&typeof I.image=="object"?I.image:typeof I.image=="string"&&I.image?{src:I.image,alt:I.title,sizes:"(max-width: 600px) 100vw, (max-width: 1200px) 50vw, 400px"}:ie,j=I.title||"MIROZA story update",K=I.excerpt||I.description||"Details publishing shortly.";return{...I,title:j,excerpt:K,link:N,image:F,metaLabel:w(I),contentType:I.contentType||ae(I.category),dateValue:J(I)}}function w(I){const N=L(I.date||I.updated);return[I.author||"MIROZA Desk",N].filter(Boolean).join(" \u2022 ")}function L(I){if(!I)return"";try{return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(new Date(I))}catch(N){return I}}function z(I){if(!I)return"#";try{const N=new URL(I,window.location.origin);return N.pathname+N.search}catch(N){return I}}function m(){if(!g.length){W("Stories are publishing soon. Browse Articles or News while we refresh data.");return}if(p=S(g,b),r=0,t.innerHTML="",X(!1),!p.length){W("No stories match this filter yet. Try switching categories.");return}const I=n.immediateCount?Math.min(n.immediateCount,p.length):0;I&&$(0,I),x(),r<p.length?P():V()}function S(I,N){if(!N||N==="all")return I.slice();const F=ae(N);return I.filter(j=>{const K=ae(j.category),G=ae(j.contentType);return F==="news"||F==="article"||F==="blog"?F===G||F===K:K===F})}function x(){f&&(f.innerHTML="",M=document.createElement("button"),M.type="button",M.className="load-more-btn",M.addEventListener("click",()=>P()),f.appendChild(M),h==null||h.disconnect(),"IntersectionObserver"in window&&(h=new IntersectionObserver(I=>{I.forEach(N=>{N.isIntersecting&&!M.disabled&&P()})},{rootMargin:"200px 0px"}),h.observe(M)),V())}function P(){if(r>=p.length){V();return}const I=Math.min(p.length,r+n.pageSize);$(r,I),V()}function $(I,N){p.slice(I,N).forEach((F,j)=>{const K=window.MIROZA.buildCard(F,{order:I+j});K&&t.appendChild(K)}),r=N}function W(I){X(!1),t.innerHTML="";const N=document.createElement("p");N.className="card-excerpt",N.textContent=I;const F=document.createElement("a");F.href="/articles.html",F.textContent="Browse all articles \u2192",F.className="text-link",F.setAttribute("data-prefetch",""),t.appendChild(N),t.appendChild(F),f&&(f.innerHTML="")}function V(){if(!M)return;const I=r<p.length;M.disabled=!I,M.textContent=I?"Load more stories":"All stories loaded"}function X(I){t==null||t.classList.toggle("is-loading",!!I)}function J(I){return(I==null?void 0:I.dateValue)||Date.parse((I==null?void 0:I.date)||(I==null?void 0:I.updated)||0)||0}function re(I){if(!I)return"";const N=I.slug||I.id;return N?N.toString().toLowerCase():(I.link||I.url||I.title||"").toLowerCase()}function ae(I){return(I||"").toString().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function ce(){C&&(console.groupCollapsed("[MIROZA] Home feed audit"),console.log("Files read",C.filesRead||[]),console.log("Source counts",C.sourceCounts),console.log("Selected per category",C.selected),console.log("Top ups applied",C.toppedUp||{}),C.shortfall&&console.log("Mixed feed shortfall",C.shortfall),console.log("Fallback HTML usage",C.htmlFallbacks||[]),console.log("Feed items prepared",C.totalRendered),console.groupEnd())}return{init:_}})(),window.MIROZA.analytics=(function(){const c={enabled:!1,plausibleDomain:"",debug:!1};let d={...c},n=!1;function t(){const p=window.MIROZA.analyticsConfig||{};d={...c,...p}}function f(){if(n||!d.plausibleDomain)return;if(document.querySelector('script[data-analytics="plausible"]')){n=!0;return}const r=document.createElement("script");r.src="https://plausible.io/js/plausible.js",r.defer=!0,r.dataset.domain=d.plausibleDomain,r.dataset.analytics="plausible",r.addEventListener("load",()=>{n=!0,d.debug&&console.info("[MIROZA]","Plausible analytics loaded")}),document.head.appendChild(r)}function M(...p){d.debug&&console.info("[MIROZA]",...p)}function h(){var p;if(d.debug){if(M("Debug diagnostics enabled"),window.addEventListener("load",()=>{var b,C,_;const r=(_=(C=(b=window.performance)==null?void 0:b.getEntriesByType)==null?void 0:C.call(b,"navigation"))==null?void 0:_[0];r&&M("Navigation timing (ms)",{domContentLoaded:Math.round(r.domContentLoadedEventEnd),total:Math.round(r.duration)})},{once:!0}),"PerformanceObserver"in window)try{new PerformanceObserver(b=>{b.getEntries().forEach(C=>M("Paint metric",C.name,Math.round(C.startTime)+"ms"))}).observe({type:"paint",buffered:!0})}catch(r){M("Paint observer unavailable",r.message)}(p=window.MIROZA.posts)!=null&&p.ready&&window.MIROZA.posts.ready().then(r=>{M("Posts available",r.length)}).catch(r=>console.warn("MIROZA diagnostics unable to read posts",r))}}function g(){t(),d.enabled&&f(),h()}return{init:g,config:()=>({...d})}})(),window.MIROZA.vitals=(function(){const c={},d="miroza_vitals_snapshot";function n(){"PerformanceObserver"in window&&(t("largest-contentful-paint",h=>f("lcp",h.renderTime||h.loadTime||h.startTime)),t("first-input",h=>f("fid",h.processingStart-h.startTime)),t("layout-shift",h=>{h.hadRecentInput||f("cls",(c.cls||0)+h.value)}))}function t(h,g){try{const p=new PerformanceObserver(b=>{b.getEntries().forEach(C=>g(C))}),r=h==="layout-shift"?{type:h,buffered:!0}:{type:h,buffered:!0};p.observe(r)}catch(p){}}function f(h,g){var p,r;typeof g!="number"||!isFinite(g)||(c[h]=g,M(),(r=(p=window.MIROZA.analytics)==null?void 0:p.config)!=null&&r.call(p).debug&&console.info("[MIROZA][Vitals]",h,g))}function M(){try{localStorage.setItem(d,JSON.stringify(c))}catch(h){}}return{init:n,get:()=>({...c})}})(),window.MIROZA.a11y=(function(){function c(){const t=window.MIROZA.utils.qs(".skip-link");t&&t.addEventListener("click",()=>{var f;(f=window.MIROZA.utils.qs("#main"))==null||f.focus()})}function d(){document.addEventListener("keydown",t=>{if(t.key==="Escape"){const f=window.MIROZA.utils.qs(".main-nav");f&&f.classList.contains("open")&&window.MIROZA.nav.toggle()}})}function n(){c(),d()}return{init:n}})(),window.MIROZA.pwa=(function(){function c(){"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").catch(d=>console.warn("SW registration failed",d))}return{register:c}})(),document.addEventListener("DOMContentLoaded",function(){window.MIROZA.shell.init(),window.MIROZA.components.init(),window.MIROZA.analytics.init(),window.MIROZA.theme.init(),window.MIROZA.nav.init(),window.MIROZA.posts.init(),window.MIROZA.blogs.init(),window.MIROZA.homeFeed.init(),window.MIROZA.categories.init(),window.MIROZA.indiaNews.init(),window.MIROZA.prefetch.init(),window.MIROZA.forms.init(),window.MIROZA.community.init(),window.MIROZA.search.init(),window.MIROZA.quickFind.init(),window.MIROZA.ui.init(),window.MIROZA.a11y.init(),window.MIROZA.vitals.init(),window.MIROZA.pwa.register(),window.MIROZA.breadcrumbs.init(),window.MIROZA.seo.init(),we();const c=window.MIROZA.utils.qs(".theme-toggle");c&&c.addEventListener("click",window.MIROZA.theme.toggle);const d=window.MIROZA.utils.qs("#year");d&&(d.textContent=new Date().getFullYear())})})();
