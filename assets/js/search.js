"use strict";!function(){const e=["articles","blogs","news","stories","info"];let t=[];function n(e,t){return!!e&&t.toLowerCase().includes(e.toLowerCase())}async function i(){t=[],document.querySelectorAll(".card").forEach(e=>{const n=e.getAttribute("data-title")||e.querySelector("h3")?.textContent||"",i=e.getAttribute("data-type")||"",s=e.getAttribute("data-description")||e.querySelector("p")?.textContent||"",o=e.closest("a");let r=o?o.getAttribute("href"):"";if(!r&&i){const t=e.getAttribute("data-id")||e.getAttribute("data-id")||"";r=`/detail.html?type=${encodeURIComponent(i)}&id=${encodeURIComponent(t)}`}n&&t.push({title:n,description:s,type:i,url:r})}),await Promise.all(e.map(async e=>{try{(await fetch(`assets/data/${e}.json`).then(e=>e.json())).forEach(n=>{const i=`/detail.html?type=${encodeURIComponent(e)}&id=${encodeURIComponent(n.id)}`;t.find(e=>e.url===i)||t.push({title:n.title||"",description:n.description||"",type:e,url:i})})}catch(e){}}))}function s(e){return e?t.map(t=>{let i=0;return n(e,t.title)&&(i+=10),n(e,t.description)&&(i+=5),n(e,t.type)&&(i+=3),{...t,score:i}}).filter(e=>e.score>0).sort((e,t)=>t.score-e.score).slice(0,8):[]}function o(e,t){t.innerHTML="",e.length?(t.style.display="block",e.forEach(e=>{const n=document.createElement("a");var i;n.className="suggestion",n.href=e.url,n.innerHTML=`<strong>${r(e.title)}</strong><div class="smeta">${i=e.type,window.utils&&window.utils.capitalize?window.utils.capitalize(i):i?i.charAt(0).toUpperCase()+i.slice(1):""} â€¢ ${r(e.description)}</div>`,t.appendChild(n)})):t.style.display="none"}function r(e){return window.utils&&window.utils.escapeHtml?window.utils.escapeHtml(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}document.addEventListener("DOMContentLoaded",()=>{(async function(){await i();const e=document.getElementById("site-search-input"),t=document.getElementById("search-suggestions"),n=document.getElementById("mobile-search-btn"),r=document.getElementById("site-search");if(n&&r&&n.addEventListener("click",()=>{r.classList.toggle("open-mobile");const e=document.getElementById("site-search-input");r.classList.contains("open-mobile")&&setTimeout(()=>e.focus(),120)}),!e)return;let c="";e.addEventListener("input",e=>{const n=e.target.value.trim();n!==c&&(c=n,o(s(n),t))}),e.addEventListener("keydown",n=>{if("Escape"===n.key&&(t.innerHTML="",t.style.display="none",e.blur()),"Enter"===n.key){const e=t.querySelector("a");e&&(window.location=e.href)}}),document.addEventListener("click",e=>{r.contains(e.target)||(t.innerHTML="",t.style.display="none",r.classList.remove("open-mobile"))})})().catch(()=>{})}),window.mirozaSearch={buildIndex:i,suggest:s,renderFullResults:async function(e,n){if(!n)return;t.length||await i();const o=s(e);n.innerHTML="",o.length?o.forEach(e=>{try{const t=window.utils&&window.utils.createCardElement?window.utils.createCardElement({title:e.title,description:e.description,date:"",image:"",id:"",type:e.type,url:e.url},{large:!1,typeOverride:e.type}):null;t&&n.appendChild(t)}catch(e){}}):n.innerHTML='<p class="muted">No results found</p>'}}}();