!function(){function e(){const e={},t=window.location.search.replace(/^\?/,"");return t?(t.split("&").forEach(t=>{const[n,i]=t.split("=");n&&(e[decodeURIComponent(n)]=decodeURIComponent(i||""))}),e):e}window.getQueryParams=e,window.loadDetail=async function(){const t=e(),n=t.type||"",i=Number(t.id),o=document.getElementById("detail-container");if(!o)return console.warn("No detail container");if(n&&Number.isFinite(i)&&!(i<=0)&&["articles","blogs","news","stories","info"].includes(n))try{const t=await window.fetchJSON(`assets/data/${n}.json`);if(!Array.isArray(t))throw new Error("Invalid data file");const a=t.find(e=>Number(e.id)===i);if(!a)return void(o.innerHTML='<p class="muted">Item not found.</p>');o.innerHTML="";const c=document.createElement("a");c.href=("articles"===n?"/articles.html":"/"+n+".html")||"/index.html",c.textContent=`← Back to ${n?n.charAt(0).toUpperCase()+n.slice(1):"Home"}`,c.className="muted",c.style.display="inline-block",c.style.marginBottom="12px";const l=document.createElement("h1");l.textContent=a.title;const s=document.createElement("img");s.className="thumb",s.style.height="360px",s.loading="lazy",s.decoding="async",s.alt=a.title||"",a.image&&(s.src=a.image);const r=document.createElement("div");r.className="meta muted",r.textContent=`${a.date||""}${a.category?" • "+a.category:""}`;const d=document.createElement("div");d.className="content",d.style.marginTop="16px",d.innerHTML=`<p>${(a.content||"").replace(/\n/g,"</p><p>")}</p>`;const m=e().slug;if(a.slug&&m!==a.slug){const e=window.utils.buildDetailUrl(n,i,a.slug);try{window.history.replaceState({},"",e)}catch(e){}}o.appendChild(c),o.appendChild(l),o.appendChild(s),o.appendChild(r),o.appendChild(d)}catch(e){console.error(e),o.innerHTML='<p class="muted">Failed to load item.</p>'}else o.innerHTML='<p class="muted">Invalid or missing `type` or `id` in URL.</p>'}}();