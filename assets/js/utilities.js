!function(){function t(t){return t?String(t).toLowerCase().trim().replace(/[^a-z0-9\-\s_]+/g,"").replace(/[\s_]+/g,"-").replace(/(^-|-$)/g,""):""}function e(t){return t?String(t).charAt(0).toUpperCase()+String(t).slice(1):""}function n(t,e,n){return`/detail.html?type=${encodeURIComponent(t)}&id=${encodeURIComponent(e)}`+(n?`&slug=${encodeURIComponent(n)}`:"")}window.utils=window.utils||{},Object.assign(window.utils,{slugify:t,uid:function(t){return(t?t+"-":"")+Date.now().toString(36)+"-"+Math.floor(16777215*Math.random()).toString(16)},todayISO:function(){return(new Date).toISOString().slice(0,10)},escapeHtml:function(t){return String(t||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},capitalize:e,createCardElement:function(i,r){const o=!!(r=r||{}).large,a=r.typeOverride||i.type||"",l=null!=r.id?r.id:null!=i.id?i.id:void 0,c=document.createElement("a"),d=a||"";null!=l?c.href=n(d,l,i.slug||i.title&&t(i.title)||""):i.url?c.href=i.url:c.href="/",c.style.textDecoration="none",c.style.color="inherit";const s=document.createElement("article");s.className="card fade-in",o&&(s.style.minHeight="180px");const u=document.createElement("img");u.className="thumb",u.loading="lazy",u.decoding="async",u.alt=i.title||"",i.image?u.src=i.image:u.setAttribute("aria-hidden","true");const m=document.createElement("h3");m.textContent=i.title||"Untitled";const p=document.createElement("p");p.textContent=i.description||"";const g=document.createElement("div");g.className="meta muted";const h=`${i.date||""}${d?" â€¢ "+e(d):""}`;return g.textContent=h,s.appendChild(u),s.appendChild(m),s.appendChild(p),s.appendChild(g),s.setAttribute("data-title",i.title||""),s.setAttribute("data-type",d||""),s.setAttribute("data-description",i.description||""),null!=l&&s.setAttribute("data-id",l),c.appendChild(s),c},downloadJSON:function(t,e){const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),i=URL.createObjectURL(n),r=document.createElement("a");r.href=i,r.download=e||"data.json",document.body.appendChild(r),r.click(),r.remove(),setTimeout(()=>URL.revokeObjectURL(i),1500)},readJSONFile:function(t,e){const n=new FileReader;n.onload=()=>{try{e(null,JSON.parse(n.result))}catch(t){e(t)}},n.onerror=()=>e(new Error("Failed to read file")),n.readAsText(t)},buildDetailUrl:n}),window.fetchJSON=async function t(e,{timeout:n=8e3,retries:i=1}={}){const r=new AbortController,o=setTimeout(()=>r.abort(),n);try{const t=await fetch(e,{cache:"no-store",signal:r.signal});if(clearTimeout(o),!t.ok)throw new Error(`Failed to load ${e} (${t.status})`);return await t.json()}catch(r){if(i>0)return t(e,{timeout:n,retries:i-1});throw r}}}();