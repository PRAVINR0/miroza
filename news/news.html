<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>News - MIROZA</title>
  <link rel="stylesheet" href="/styles/main.css" />
  <link rel="icon" type="image/svg+xml" href="/assets/icons/logo.svg" />
</head>
<body>

  <!-- 1. Top Strip -->
  <div class="top-strip">
    <div class="container">
      <div class="ts-left">
        <span>Tuesday, Nov 25, 2025</span>
        <span class="separator">|</span>
        <span>Updated 09:45 AM IST</span>
      </div>
      <div class="ts-right">
        <span>EPAPER</span>
        <span class="separator">|</span>
        <span>SIGN IN</span>
      </div>
    </div>
  </div>

  <!-- 2. Header -->
  <header class="site-header">
    <div class="container header-grid">
      <button class="menu-toggle" aria-label="Toggle Menu"></button>
      
      <a href="/index.html" class="logo">
        <img src="/assets/icons/logo.svg" alt="Miroza Logo" />
        MIROZA
      </a>

      <div class="header-search">
        <form action="/search.html" method="GET">
          <input type="text" name="q" placeholder="Search News, Articles..." required />
          <button type="submit" class="search-btn">
            <img src="/assets/icons/search.svg" alt="Search" width="16" height="16" />
          </button>
        </form>
      </div>

      <button class="mobile-search-toggle" aria-label="Search">
        <img src="/assets/icons/search.svg" alt="Search" width="24" height="24" />
      </button>
    </div>
  </header>

  <!-- 3. Nav Bar -->
  <nav class="main-nav-bar">
    <div class="container">
      <ul class="nav-list">
        <li><a href="/index.html">Home</a></li>
        <li><a href="/news/news.html" class="active">News</a></li>
        <li><a href="/articles/articles.html">Articles</a></li>
        <li><a href="/blog.html">Blogs</a></li>
        <li><a href="/about.html">About Us</a></li>
        <li><a href="/contact.html">Contact</a></li>
      </ul>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="container main-layout">
    
    <!-- Left Column: News List -->
    <div class="col-center" style="grid-column: 1 / span 2;">
      <div class="section-heading-sm">
        <h3>Latest News</h3>
      </div>
      
      <div id="loading" class="skeleton-block" style="height: 100px; margin-bottom: 20px;"></div>

      <div id="news-container" class="compact-list">
        <!-- Results injected here -->
      </div>

      <div id="pagination" style="margin-top: 30px; text-align: center; display: none;">
        <button id="load-more-btn" style="background: var(--bg-secondary); border: 1px solid var(--border-color); padding: 10px 20px; cursor: pointer; font-weight: bold; color: var(--text-main);">LOAD MORE NEWS</button>
      </div>
    </div>

    <!-- Right Column: Sidebar -->
    <aside class="col-right">
      <div class="ad-box-sm">ADVERTISEMENT</div>

      <div class="section-heading-sm">
        <h3>Trending Topics</h3>
      </div>
      <div class="tags-cloud">
        <a href="/search.html?q=AI">Artificial Intelligence</a>
        <a href="/search.html?q=Climate">Climate Change</a>
        <a href="/search.html?q=Tech">Technology</a>
        <a href="/search.html?q=Health">Health</a>
        <a href="/search.html?q=Space">Space</a>
      </div>

      <div class="ad-box-lg">ADVERTISEMENT</div>
    </aside>

  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container">
      <div class="footer-links">
        <div class="fl-col">
          <h4>Miroza</h4>
          <a href="/about.html">About Us</a>
          <a href="/contact.html">Contact Us</a>
          <a href="/privacy.html">Privacy Policy</a>
          <a href="/terms.html">Terms of Use</a>
        </div>
        <div class="fl-col">
          <h4>Sections</h4>
          <a href="/news/news.html">News</a>
          <a href="/articles/articles.html">Articles</a>
          <a href="/blog.html">Blogs</a>
          <a href="/videos.html">Videos</a>
        </div>
        <div class="fl-col">
          <h4>Connect</h4>
          <a href="#">Facebook</a>
          <a href="#">Twitter</a>
          <a href="#">Instagram</a>
          <a href="#">LinkedIn</a>
        </div>
      </div>
      <div class="copyright">
        Copyright  2025 Miroza Media. All rights reserved.
      </div>
    </div>
  </footer>

  <script src="/scripts/app.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
        const container = document.getElementById('news-container');
        const loading = document.getElementById('loading');
        const pagination = document.getElementById('pagination');
        const loadMoreBtn = document.getElementById('load-more-btn');

        try {
            // Use the store from app.js
            const news = await window.MIROZA.store.getNews();
            
            loading.style.display = 'none';

            if (!news || news.length === 0) {
                container.innerHTML = '<p>No news available at the moment.</p>';
                return;
            }

            let page = 1;
            const pageSize = 15;
            
            function renderPage() {
                const start = (page - 1) * pageSize;
                const end = start + pageSize;
                const slice = news.slice(start, end);
                
                slice.forEach(item => {
                    const li = document.createElement('li');
                    const link = window.MIROZA.utils.getLink(item);
                    li.innerHTML = `
                        <a href="${link}" style="display:flex; justify-content:space-between; align-items:center;">
                            <div>
                                <span style="font-size:11px; color:var(--toi-red); font-weight:bold; text-transform:uppercase;">${item.category || 'News'}</span>
                                <h4 style="margin-top:4px; font-size:16px; font-weight:bold; color:var(--text-main);">${item.title}</h4>
                                <p style="font-size:13px; color:var(--text-muted); margin-top:4px;">${item.excerpt || ''}</p>
                            </div>
                            ${item.image ? `<img src="${window.MIROZA.utils.getImage(item)}" style="width:80px; height:60px; object-fit:cover; margin-left:15px; border-radius:4px;" alt="" />` : ''}
                        </a>
                    `;
                    container.appendChild(li);
                });

                if (end >= news.length) {
                    pagination.style.display = 'none';
                } else {
                    pagination.style.display = 'block';
                }
            }

            renderPage();

            loadMoreBtn.addEventListener('click', () => {
                page++;
                renderPage();
            });

        } catch (err) {
            console.error(err);
            loading.style.display = 'none';
            container.innerHTML = '<p>Error loading news.</p>';
        }
    });
  </script>
</body>
</html>
