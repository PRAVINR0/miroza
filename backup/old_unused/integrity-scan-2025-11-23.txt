Integrity scan — 2025-11-23

Summary:
- Service worker: root `service-worker.js` replaced with a minimal, non-caching stub on 2025-11-23. Original backed up as `backup/old_unused/service-worker.moved-2025-11-23.js`.
- GitHub Actions workflow `generate-site.yml` was moved/neutralized; original preserved at `backup/old_unused/generate-site.yml`.
- Automation scripts and server files were left in or moved to `backup/old_unused/` (see folder contents).

Files and references found:
- Pages that call `initPWA()` (will now call safe `initPWA()` added to `assets/js/main.js`):
  - `index.html`, `news.html`, `blog.html`, `articles.html`, `stories.html`, `detail.html`, `search.html`, `offline.html`, `404.html` and many tag pages that include the shared header.

- Service worker references / registrations found:
  - No active `navigator.serviceWorker.register(...)` calls in codebase other than the safe registration now performed by `initPWA()`.
  - Comments and backups mention registration; actual registration is done via `initPWA()` exposed on window.

- Cache usage and SW logic:
  - All cache-related logic exists in the backed-up original `service-worker` files inside `backup/old_unused/` (e.g., `service-worker.moved-2025-11-23.js`).
  - Root `service-worker.js` now deletes caches on activation and does not intercept fetches.

- Automation artifacts moved to backup:
  - `backup/old_unused/package.json`
  - `backup/old_unused/server.js`
  - `backup/old_unused/sw.js`
  - `backup/old_unused/scripts/` (many generator and PowerShell scripts)
  - `backup/old_unused/generate-site.yml`

Notes / Recommendations:
1) `initPWA()` was missing earlier and pages called it; I added a minimal safe implementation to `assets/js/main.js` so pages no longer throw a missing-function error.
2) The service worker is intentionally non-caching now — when you are ready, restore or craft a hardened SW (from the backup) with explicit cache names, size limits, and audit of offline entry points.
3) The `.github/workflows/generate-site.yml` is neutralized in-place and the original is in backup — restore carefully when you want automation back.
4) Next integrity checks I recommend:
   - Verify that all CSS/JS assets referenced from HTML exist under `assets/` (I checked `assets/css/main.css` exists). I can run a full asset-existence scan next.
   - Run a browser test (open `index.html` via `npm run start` or a simple file server) and inspect console for leftover errors.

Files checked/generated by this scan:
- `service-worker.js` (root) — current stub
- `backup/old_unused/service-worker.moved-2025-11-23.js` — full SW backup
- `backup/old_unused/generate-site.yml` — workflow backup
- `assets/js/main.js` — updated with `initPWA()`

End of integrity scan.
